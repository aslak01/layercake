<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="Layer Cake" name=description> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#ff3e00 name=theme-color> <link href=/layercake-logo-100.png rel=icon type=image/png> <meta content=https://layercake.graphics property=og:site_name> <meta content=article property=og:type> <meta content=summary_large_image name=twitter:card> <meta content=https://layercake.graphics/layercake-logo-1200.png property=og:image> <meta content="A framework for mostly-reusable graphics with svelte" property=og:description> <meta content="A framework for mostly-reusable graphics with svelte" name=description> <meta content="layercake, graphics, svelte, graphics framework, svelte graphics framework, data viz, data visualization, reusable, mostly-reusable" name=keywords> <meta content=https://layercake.graphics property=og:url> <link href=https://layercake.graphics/favicon.png rel="shortcut icon" type=image/png> <meta content=https://layercake.graphics name=twitter:site> <meta content=https://layercake.graphics/layercake-logo-1200.png name=twitter:image> <title>Brush.html.svelte component</title> <link href=/_app/start-65102c1c.js rel=modulepreload> <link href=/_app/chunks/vendor-1f8923b3.js rel=modulepreload> <link href=/_app/chunks/singletons-12a22614.js rel=modulepreload> <link href=/_app/pages/__layout.svelte-dd0c3232.js rel=modulepreload> <link href=/_app/chunks/GuideContents-aab09d1f.js rel=modulepreload> <link href=/_app/chunks/_examples-939f38a9.js rel=modulepreload> <link href=/_app/chunks/Brush.html-a62bf58f.js rel=modulepreload> <link href=/_app/chunks/dots-7dc173c5.js rel=modulepreload> <link href=/_app/chunks/pointsFour-ad3813a0.js rel=modulepreload> <link href=/_app/chunks/_examples_ssr-7c49e039.js rel=modulepreload> <link href=/_app/chunks/ClevelandDotPlot.percent-range.html-5f8c77ed.js rel=modulepreload> <link href=/_app/pages/components/_slug_.svelte-f23bdaee.js rel=modulepreload> <link href=/_app/chunks/downloadBlob-73ede60f.js rel=modulepreload> <link href=/_app/chunks/hljsDefineSvelte-bd0b92b8.js rel=modulepreload> <link href=/_app/chunks/_components-8873c8e8.js rel=modulepreload> <link href=/_app/assets/start-61d1577b.css rel=stylesheet> <link href=/_app/assets/pages/__layout.svelte-018a56ef.css rel=stylesheet> <link href=/_app/assets/GuideContents-1848e154.css rel=stylesheet> <link href=/_app/assets/_examples-998eb4dc.css rel=stylesheet> <link href=/_app/assets/Brush.html-f5d06c93.css rel=stylesheet> <link href=/_app/assets/dots-d212bdb6.css rel=stylesheet> <link href=/_app/assets/_examples_ssr-92b79465.css rel=stylesheet> <link href=/_app/assets/ClevelandDotPlot.percent-range.html-1e347309.css rel=stylesheet> <link href=/_app/assets/pages/components/_slug_.svelte-c616895e.css rel=stylesheet> <link href=/_app/assets/_components-67bd5b0f.css rel=stylesheet> <script type=module> import { start } from "/_app/start-65102c1c.js";
			start({
				target: document.querySelector("body"),
				paths: {"base":"","assets":""},
				session: {},
				host: location.host,
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/_app/pages/__layout.svelte-dd0c3232.js"),
						import("/_app/pages/components/_slug_.svelte-f23bdaee.js")
					],
					page: {
						host: location.host, // TODO this is redundant
						path: "\u002Fcomponents\u002FBrush.html.svelte",
						query: new URLSearchParams(""),
						params: {slug:"Brush.html.svelte"}
					}
				}
			}); </script> </head> <body> <div id=svelte> <div class="svelte-1dclgaf closed mousecatcher"></div> <div class="svelte-1dclgaf container"><span class="svelte-1dclgaf menu-closed menu-link">Menu</span> <a href=/ class="svelte-1dclgaf logo" sveltekit:prefetch>Layer Cake</a></div> <ul class="svelte-1dclgaf dropdown"><li class=svelte-1dclgaf> <select class=svelte-1dclgaf><option value=/ >All<option value="" class="svelte-1dclgaf header" disabled><option value=Client-side class="svelte-1dclgaf header" disabled>Client-side<option value=/example/Bar>Bar<option value=/example/Beeswarm>Beeswarm<option value=/example/BeeswarmForce>Beeswarm, force layout<option value=/example/Brush>Brush<option value=/example/Calendar>Calendar<option value=/example/CirclePack>Circle pack<option value=/example/CirclePackForce>Circle pack, force layout<option value=/example/ClevelandDotPlot>Cleveland dot plot<option value=/example/Column>Column annotated<option value=/example/Histogram>Histogram<option value=/example/Line>Line + area<option value=/example/MapSvg>Map<option value=/example/MapLayered>Multilayer map<option value=/example/MultiLine>Multiline<option value=/example/CirclePackNested>Nested circle pack<option value=/example/Radar>Radar chart<option value=/example/Sankey>Sankey<option value=/example/Scatter>Scatter<option value=/example/SmallMultiples>Small multiples<option value=/example/AreaStacked>Stacked area<option value=/example/BarStacked>Stacked bar<option value=/example/ColumnStacked>Stacked column<option value=/example/SyncedBrush>Synced brush<option value=/example/Timeplot>Time of day plot<option value=/example/ScatterWebgl>WebGL Scatter<option value="" class="svelte-1dclgaf header" disabled><option value=Server-side class="svelte-1dclgaf header" disabled>Server-side<option value=/example-ssr/Bar>Bar<option value=/example-ssr/Brush>Brush<option value=/example-ssr/Calendar>Calendar<option value=/example-ssr/ClevelandDotPlot>Cleveland dot plot<option value=/example-ssr/Column>Column annotated<option value=/example-ssr/Histogram>Histogram<option value=/example-ssr/Line>Line + area<option value=/example-ssr/MapSvg>Map<option value=/example-ssr/MapLayered>Multilayer map<option value=/example-ssr/MultiLine>Multiline<option value=/example-ssr/Scatter>Scatter<option value=/example-ssr/SmallMultiples>Small multiples<option value=/example-ssr/AreaStacked>Stacked area<option value=/example-ssr/BarStacked>Stacked bar<option value=/example-ssr/ColumnStacked>Stacked column<option value=/example-ssr/SyncedBrush>Synced brush<option value=/example-ssr/Timeplot>Time of day plot<option value=/example-ssr/ScatterWebgl>WebGL Scatter</select></ul> <nav class="svelte-1dclgaf closed"><ul class="svelte-1dclgaf primary"><li class=svelte-1dclgaf><a href=/components class=svelte-1dclgaf sveltekit:prefetch><span class="svelte-1dclgaf wide-name">Component gallery</span><span class="svelte-1dclgaf short-name">Components</span></a></li> <li class=svelte-1dclgaf><a href=/guide class=svelte-1dclgaf sveltekit:prefetch>Guide</a></li> <li class=svelte-1dclgaf><a href=https://github.com/mhkeller/layercake class=svelte-1dclgaf id=github-link></a></ul> <div class="svelte-1dclgaf secondary"><ul class="guide-toc svelte-7hddv0"></ul></div></nav> <main> <div class="svelte-1nib49m main"><h1>Brush.html.svelte component</h1> <div class="svelte-1nib49m chart-hero"><div class="svelte-gzqk0p chart-container"></div> <div class="svelte-gzqk0p brush-container"></div></div> <div class="svelte-1nib49m download"><button class="icon svelte-1gef78k" style=background-image:url(/icons/download.svg) title="download zip file">Download      </button></div> <div class="svelte-1nib49m dek"><p>Adds a brush component to create a range between 0 and 1. Bind to the <code>min</code> and <code>max</code> props to use them in other components. See the <a href=https://layercake.graphcics/example/Brush>brushable example</a> for use.</p> </div> <div class=svelte-1nib49m id=params-table><table> <thead> <tr> <th>Param</th> <th>Default</th> <th>Required</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><strong>min</strong> <code>Number</code></td> <td>None</td> <td><center>yes</center></td> <td>The brush's min value.</td> </tr> <tr> <td><strong>max</strong> <code>Number</code></td> <td>None</td> <td><center>yes</center></td> <td>The brush's max value.</td> </tr> </tbody> </table> </div> <div class=svelte-1nib49m id=used-in><h3 class=svelte-1nib49m>Used in these examples:</h3> <ul class=svelte-1nib49m><li><a href=/example/Brush class=svelte-1nib49m sveltekit:prefetch>Brush</a></li> </ul><h3 class=svelte-1nib49m>SSR Examples:</h3> <ul class=svelte-1nib49m><li><a href=/example-ssr/Brush class=svelte-1nib49m sveltekit:prefetch>Brush</a></li> </ul></div> <div class=svelte-1nib49m id=pages><ul class=svelte-1nib49m id=page-nav><li class="svelte-1nib49m active tab">Brush.html.svelte</ul> <div class=svelte-1nib49m id=contents-container><div class="svelte-1nib49m copy"></div> <div class=contents style=display:block><pre class=svelte-1nib49m><span class=language-xml><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span></span><span class=language-javascript>
  <span class=hljs-comment>/**
    Adds a brush component to create a range between 0 and 1. Bind to the `min` and `max` props to use them in other components. See the [brushable example](https://layercake.graphcics/example/Brush) for use.
    <span class=hljs-doctag>@type</span> {<span class=hljs-type>Number</span>} min – The brush's min value.
    <span class=hljs-doctag>@type</span> {<span class=hljs-type>Number</span>} max – The brush's max value.
  */</span>
  <span class=hljs-keyword>import</span> { clamp } <span class=hljs-keyword>from</span> <span class=hljs-string>'yootils'</span>;

  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> min;
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> max;

  <span class=hljs-keyword>let</span> brush;

  <span class=hljs-keyword>const</span> <span class="hljs-title function_">p</span> = x => {
    <span class=hljs-keyword>const</span> { left, right } = brush.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class=hljs-keyword>return</span> <span class="hljs-title function_">clamp</span>((x - left) / (right - left), <span class=hljs-number>0</span>, <span class=hljs-number>1</span>);
  };

  <span class=hljs-keyword>const</span> <span class="hljs-title function_">handler</span> = fn => {
    <span class=hljs-keyword>return</span> <span class=hljs-function><span class=hljs-params>e</span> =></span> {
      <span class=hljs-keyword>if</span> (e.<span class=hljs-property>type</span> === <span class=hljs-string>'touchstart'</span>) {
        <span class=hljs-keyword>if</span> (e.<span class=hljs-property>touches</span>.<span class=hljs-property>length</span> !== <span class=hljs-number>1</span>) <span class=hljs-keyword>return</span>;
        e = e.<span class=hljs-property>touches</span>[<span class=hljs-number>0</span>];
      }

      <span class=hljs-keyword>const</span> id = e.<span class=hljs-property>identifier</span>;
      <span class=hljs-keyword>const</span> start = { min, max, <span class=hljs-attr>p</span>: <span class="hljs-title function_">p</span>(e.<span class=hljs-property>clientX</span>) };

      <span class=hljs-keyword>const</span> <span class="hljs-title function_">handle_move</span> = e => {
        <span class=hljs-keyword>if</span> (e.<span class=hljs-property>type</span> === <span class=hljs-string>'touchmove'</span>) {
          <span class=hljs-keyword>if</span> (e.<span class=hljs-property>changedTouches</span>.<span class=hljs-property>length</span> !== <span class=hljs-number>1</span>) <span class=hljs-keyword>return</span>;
          e = e.<span class=hljs-property>changedTouches</span>[<span class=hljs-number>0</span>];
          <span class=hljs-keyword>if</span> (e.<span class=hljs-property>identifier</span> !== id) <span class=hljs-keyword>return</span>;
        }

        <span class="hljs-title function_">fn</span>(start, <span class="hljs-title function_">p</span>(e.<span class=hljs-property>clientX</span>));
      };

      <span class=hljs-keyword>const</span> <span class="hljs-title function_">handle_end</span> = e => {
        <span class=hljs-keyword>if</span> (e.<span class=hljs-property>type</span> === <span class=hljs-string>'touchend'</span>) {
          <span class=hljs-keyword>if</span> (e.<span class=hljs-property>changedTouches</span>.<span class=hljs-property>length</span> !== <span class=hljs-number>1</span>) <span class=hljs-keyword>return</span>;
          <span class=hljs-keyword>if</span> (e.<span class=hljs-property>changedTouches</span>[<span class=hljs-number>0</span>].<span class=hljs-property>identifier</span> !== id) <span class=hljs-keyword>return</span>;
        } <span class=hljs-keyword>else</span> <span class=hljs-keyword>if</span> (e.<span class=hljs-property>target</span> === brush) {
          <span class="hljs-title function_">clear</span>();
        }

        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class=hljs-string>'mousemove'</span>, handle_move);
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class=hljs-string>'mouseup'</span>, handle_end);

        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class=hljs-string>'touchmove'</span>, handle_move);
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class=hljs-string>'touchend'</span>, handle_end);
      };

      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class=hljs-string>'mousemove'</span>, handle_move);
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class=hljs-string>'mouseup'</span>, handle_end);

      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class=hljs-string>'touchmove'</span>, handle_move);
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class=hljs-string>'touchend'</span>, handle_end);
    };
  };

  <span class=hljs-keyword>const</span> <span class="hljs-title function_">clear</span> = (<span class=hljs-params></span>) => {
    min = <span class=hljs-literal>null</span>;
    max = <span class=hljs-literal>null</span>;
  }

  <span class=hljs-keyword>const</span> reset = <span class="hljs-title function_">handler</span>(<span class=hljs-function>(<span class=hljs-params>start, p</span>) =></span> {
    min = <span class="hljs-title function_">clamp</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start.<span class=hljs-property>p</span>, p), <span class=hljs-number>0</span>, <span class=hljs-number>1</span>);
    max = <span class="hljs-title function_">clamp</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(start.<span class=hljs-property>p</span>, p), <span class=hljs-number>0</span>, <span class=hljs-number>1</span>);
  });

  <span class=hljs-keyword>const</span> move = <span class="hljs-title function_">handler</span>(<span class=hljs-function>(<span class=hljs-params>start, p</span>) =></span> {
    <span class=hljs-keyword>const</span> d = <span class="hljs-title function_">clamp</span>(p - start.<span class=hljs-property>p</span>, -start.<span class=hljs-property>min</span>, <span class=hljs-number>1</span> - start.<span class=hljs-property>max</span>);
    min = start.<span class=hljs-property>min</span> + d;
    max = start.<span class=hljs-property>max</span> + d;
  });

  <span class=hljs-keyword>const</span> adjust_min = <span class="hljs-title function_">handler</span>(<span class=hljs-function>(<span class=hljs-params>start, p</span>) =></span> {
    min = p > start.<span class=hljs-property>max</span> ? start.<span class=hljs-property>max</span> : p;
    max = p > start.<span class=hljs-property>max</span> ? p : start.<span class=hljs-property>max</span>;
  });

  <span class=hljs-keyword>const</span> adjust_max = <span class="hljs-title function_">handler</span>(<span class=hljs-function>(<span class=hljs-params>start, p</span>) =></span> {
    min = p &lt; start.<span class=hljs-property>min</span> ? p : start.<span class=hljs-property>min</span>;
    max = p &lt; start.<span class=hljs-property>min</span> ? start.<span class=hljs-property>min</span> : p;
  });
</span><span class=hljs-keyword>
  $: </span><span class=language-javascript>left = <span class=hljs-number>100</span> * min;
</span><span class=hljs-keyword>  $: </span><span class=language-javascript>right = <span class=hljs-number>100</span> * (<span class=hljs-number>1</span> - max);
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>bind:this</span>=</span></span><span class=language-javascript>{brush}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>class</span>=<span class=hljs-string>"brush-outer"</span> <span class=hljs-attr>on:mousedown</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{reset}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>on:touchstart</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{reset}</span><span class=language-xml><span class=hljs-tag>></span>
  </span><span class=language-javascript>{</span><span class=hljs-keyword>#if</span><span class=language-javascript> min !== <span class=hljs-literal>null</span>}</span><span class=language-xml>
    <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"brush-inner"</span> <span class=hljs-attr>on:mousedown</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{move}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>on:touchstart</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{move}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>style</span>=<span class=hljs-string>"left: </span></span></span><span class=language-javascript>{left}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%; right: </span></span></span><span class=language-javascript>{right}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%"</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"brush-handle"</span> <span class=hljs-attr>on:mousedown</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{adjust_min}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>on:touchstart</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{adjust_min}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>style</span>=<span class=hljs-string>"left: </span></span></span><span class=language-javascript>{left}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%"</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"brush-handle"</span> <span class=hljs-attr>on:mousedown</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{adjust_max}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>on:touchstart</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{adjust_max}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>style</span>=<span class=hljs-string>"right: </span></span></span><span class=language-javascript>{right}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%"</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
  </span><span class=language-javascript>{</span><span class=hljs-keyword>/if</span><span class=language-javascript>}</span><span class=language-xml>
<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>style</span>></span></span><span class=language-css>
  <span class=hljs-selector-class>.brush-outer</span> {
    <span class=hljs-attribute>position</span>: relative;
    <span class=hljs-attribute>width</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>height</span>: <span class=hljs-built_in>calc</span>(<span class=hljs-number>100%</span> + <span class=hljs-number>5px</span>);
    <span class=hljs-attribute>top</span>: -<span class=hljs-number>5px</span>;
  }

  <span class=hljs-selector-class>.brush-inner</span> {
    <span class=hljs-attribute>position</span>: absolute;
    <span class=hljs-attribute>height</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>cursor</span>: move;
    <span class=hljs-comment>/* mix-blend-mode: difference; */</span>
    <span class=hljs-attribute>background-color</span>: <span class=hljs-number>#cccccc90</span>;
    <span class=hljs-comment>/* border: 1px solid #000; */</span>
  }

  <span class=hljs-selector-class>.brush-handle</span> {
    <span class=hljs-attribute>position</span>: absolute;
    <span class=hljs-attribute>width</span>: <span class=hljs-number>0</span>;
    <span class=hljs-attribute>height</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>cursor</span>: ew-resize;
  }

  <span class=hljs-selector-class>.brush-handle</span><span class=hljs-selector-pseudo>::before</span> {
    <span class=hljs-attribute>position</span>: absolute;
    <span class=hljs-attribute>content</span>: <span class=hljs-string>''</span>;
    <span class=hljs-attribute>width</span>: <span class=hljs-number>8px</span>;
    <span class=hljs-attribute>left</span>: -<span class=hljs-number>4px</span>;
    <span class=hljs-attribute>height</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>background</span>: transparent;
  }
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>style</span>></span></span></pre> </div></div></div></div></main> <script type=application/json data-type=svelte-data data-url=Brush.html.svelte.json>{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"main\":{\"slug\":\"Brush.html.svelte\",\"contents\":\"\u003Cscript\u003E\\n  \u002F**\\n    Adds a brush component to create a range between 0 and 1. Bind to the `min` and `max` props to use them in other components. See the [brushable example](https:\u002F\u002Flayercake.graphcics\u002Fexample\u002FBrush) for use.\\n    @type {Number} min – The brush's min value.\\n    @type {Number} max – The brush's max value.\\n  *\u002F\\n  import { clamp } from 'yootils';\\n\\n  export let min;\\n  export let max;\\n\\n  let brush;\\n\\n  const p = x =\u003E {\\n    const { left, right } = brush.getBoundingClientRect();\\n    return clamp((x - left) \u002F (right - left), 0, 1);\\n  };\\n\\n  const handler = fn =\u003E {\\n    return e =\u003E {\\n      if (e.type === 'touchstart') {\\n        if (e.touches.length !== 1) return;\\n        e = e.touches[0];\\n      }\\n\\n      const id = e.identifier;\\n      const start = { min, max, p: p(e.clientX) };\\n\\n      const handle_move = e =\u003E {\\n        if (e.type === 'touchmove') {\\n          if (e.changedTouches.length !== 1) return;\\n          e = e.changedTouches[0];\\n          if (e.identifier !== id) return;\\n        }\\n\\n        fn(start, p(e.clientX));\\n      };\\n\\n      const handle_end = e =\u003E {\\n        if (e.type === 'touchend') {\\n          if (e.changedTouches.length !== 1) return;\\n          if (e.changedTouches[0].identifier !== id) return;\\n        } else if (e.target === brush) {\\n          clear();\\n        }\\n\\n        window.removeEventListener('mousemove', handle_move);\\n        window.removeEventListener('mouseup', handle_end);\\n\\n        window.removeEventListener('touchmove', handle_move);\\n        window.removeEventListener('touchend', handle_end);\\n      };\\n\\n      window.addEventListener('mousemove', handle_move);\\n      window.addEventListener('mouseup', handle_end);\\n\\n      window.addEventListener('touchmove', handle_move);\\n      window.addEventListener('touchend', handle_end);\\n    };\\n  };\\n\\n  const clear = () =\u003E {\\n    min = null;\\n    max = null;\\n  }\\n\\n  const reset = handler((start, p) =\u003E {\\n    min = clamp(Math.min(start.p, p), 0, 1);\\n    max = clamp(Math.max(start.p, p), 0, 1);\\n  });\\n\\n  const move = handler((start, p) =\u003E {\\n    const d = clamp(p - start.p, -start.min, 1 - start.max);\\n    min = start.min + d;\\n    max = start.max + d;\\n  });\\n\\n  const adjust_min = handler((start, p) =\u003E {\\n    min = p \u003E start.max ? start.max : p;\\n    max = p \u003E start.max ? p : start.max;\\n  });\\n\\n  const adjust_max = handler((start, p) =\u003E {\\n    min = p \u003C start.min ? p : start.min;\\n    max = p \u003C start.min ? start.min : p;\\n  });\\n\\n  $: left = 100 * min;\\n  $: right = 100 * (1 - max);\\n\u003C\u002Fscript\u003E\\n\\n\u003Cdiv bind:this={brush} class=\\\"brush-outer\\\" on:mousedown|stopPropagation={reset} on:touchstart|stopPropagation={reset}\u003E\\n  {#if min !== null}\\n    \u003Cdiv class=\\\"brush-inner\\\" on:mousedown|stopPropagation={move} on:touchstart|stopPropagation={move} style=\\\"left: {left}%; right: {right}%\\\"\u003E\u003C\u002Fdiv\u003E\\n    \u003Cdiv class=\\\"brush-handle\\\" on:mousedown|stopPropagation={adjust_min} on:touchstart|stopPropagation={adjust_min} style=\\\"left: {left}%\\\"\u003E\u003C\u002Fdiv\u003E\\n    \u003Cdiv class=\\\"brush-handle\\\" on:mousedown|stopPropagation={adjust_max} on:touchstart|stopPropagation={adjust_max} style=\\\"right: {right}%\\\"\u003E\u003C\u002Fdiv\u003E\\n  {\u002Fif}\\n\u003C\u002Fdiv\u003E\\n\\n\u003Cstyle\u003E\\n  .brush-outer {\\n    position: relative;\\n    width: 100%;\\n    height: calc(100% + 5px);\\n    top: -5px;\\n  }\\n\\n  .brush-inner {\\n    position: absolute;\\n    height: 100%;\\n    cursor: move;\\n    \u002F* mix-blend-mode: difference; *\u002F\\n    background-color: #cccccc90;\\n    \u002F* border: 1px solid #000; *\u002F\\n  }\\n\\n  .brush-handle {\\n    position: absolute;\\n    width: 0;\\n    height: 100%;\\n    cursor: ew-resize;\\n  }\\n\\n  .brush-handle::before {\\n    position: absolute;\\n    content: '';\\n    width: 8px;\\n    left: -4px;\\n    height: 100%;\\n    background: transparent;\\n  }\\n\u003C\u002Fstyle\u003E\"},\"dek\":\"\",\"usedIn\":[{\"group\":\"Regular\",\"matches\":[\"\u002Fexample\u002FBrush\"]},{\"group\":\"SSR\",\"matches\":[\"\u002Fexample-ssr\u002FBrush\"]}],\"jsdocParsed\":{\"description\":\"Adds a brush component to create a range between 0 and 1. Bind to the `min` and `max` props to use them in other components. See the [brushable example](https:\u002F\u002Flayercake.graphcics\u002Fexample\u002FBrush) for use.\",\"tags\":[{\"title\":\"param\",\"description\":\"– The brush's min value.\",\"type\":{\"type\":\"NameExpression\",\"name\":\"Number\"},\"name\":\"min\"},{\"title\":\"param\",\"description\":\"– The brush's max value.\",\"type\":{\"type\":\"NameExpression\",\"name\":\"Number\"},\"name\":\"max\"}]}}"}</script> </div> 