import{o as vt,a as y,w as yt,c as D,n as _t,b as $,f as lt,s as ct,t as R,i as r,j as xt}from"./disclose-version.DBj9Vt0q.js";import{p as et,aj as at,A as T,B as ot,r as M,a as it,x as E,z as q,h as t,m as p,s as L,ak as g,l as zt}from"./runtime.D9nQNyi8.js";import{i as tt}from"./if.CfD4apJF.js";import{s as H,e as rt,t as Mt,a as bt,i as ft}from"./class.ClfF0HVi.js";import{s as h,q as Bt,f as Ct}from"./Brush.html.BdUhYxDO.js";import{p as a,b as At}from"./index-client.CFCBblPQ.js";import{i as st}from"./lifecycle.fbi-k1SI.js";import{u as nt,s as x}from"./store.Co5usZpv.js";var Vt=yt("<title> </title>"),Rt=yt('<svg preserveAspectRatio="none" style="right:0px; bottom:0px;" class="svelte-6sm8ei"><!><defs><!></defs><!></svg>');function de(N,e){var w,f;et(e,!1);const s={};nt(s);const i=()=>x(j,"$padding",s),{padding:j}=at("LayerCake");let l=a(e,"element",4,void 0),m=a(e,"zIndex",0,void 0),b=a(e,"pointerEvents",0,void 0),d=a(e,"fixedAspectRatio",0,1),S=a(e,"viewBox",12,()=>`0 0 100 ${100/d()}`),G=a(e,"label",0,void 0),Q=a(e,"labelledBy",0,void 0),K=a(e,"describedBy",0,void 0),I=a(e,"title",0,void 0);T(()=>E(d()),()=>{S(`0 0 100 ${100/d()}`)}),ot(),st();var c=Rt();At(c,P=>l(P),()=>l());var k=D(c);vt(k,(w=e.$$slots)==null?void 0:w.title,{},P=>{var z=_t(),C=lt(z);tt(C,I,n=>{var _=Vt(),u=D(_);M(()=>ct(u,I())),y(n,_)}),y(P,z)});var V=$(k),B=D(V);vt(B,(f=e.$$slots)==null?void 0:f.defs,{},null);var v=$(V);vt(v,e.children,{get element(){return l()}},null),M(()=>{H(c,"viewBox",S()),H(c,"aria-label",G()),H(c,"aria-labelledby",Q()),H(c,"aria-describedby",K()),h(c,"z-index",m()),h(c,"pointer-events",b()===!1?"none":null),h(c,"top",i().top+"px"),h(c,"left",i().left+"px"),h(c,"width",`calc(100% - ${i().left+i().right}px)`),h(c,"height",`calc(100% - ${i().top+i().bottom}px)`)}),y(N,c),it()}var Pt=R('<div class="baseline svelte-fdkjmm" style="top:100%; width:100%;"></div>'),Tt=R('<div class="gridline svelte-fdkjmm" style="top:0; bottom:0;"></div>'),qt=R('<div class="tick-mark svelte-fdkjmm"></div>'),Kt=R('<!> <!> <!> <div><div class="text svelte-fdkjmm"> </div></div>',1),Wt=R('<div class="axis x-axis svelte-fdkjmm"></div>');function oe(N,e){et(e,!1);const s={};nt(s);const i=()=>x(G,"$xScale",s),j=p(),l=p(),m=p(),b=p(),{width:d,height:S,xScale:G,yRange:Q}=at("LayerCake");let K=a(e,"tickMarks",0,!1),I=a(e,"gridlines",0,!0),c=a(e,"tickMarkLength",0,6),k=a(e,"baseline",0,!1),V=a(e,"snapLabels",0,!1),B=a(e,"format",0,C=>C),v=a(e,"ticks",0,void 0),w=a(e,"tickGutter",0,0),f=a(e,"dx",0,0),P=a(e,"dy",0,1);T(()=>(E(K()),E(c())),()=>{L(j,K()===!0?c()??6:0)}),T(()=>i(),()=>{L(l,typeof i().bandwidth=="function")}),T(()=>(E(v()),t(l),i()),()=>{L(m,Array.isArray(v())?v():t(l)?i().domain():typeof v()=="function"?v()(i().ticks()):i().ticks(v()))}),T(()=>(t(l),i()),()=>{L(b,t(l)?i().bandwidth()/2:0)}),ot(),st();var z=Wt();rt(z,15,()=>t(m),(C,n)=>q(C),(C,n,_)=>{var u=Kt();const o=g(()=>i()(q(n)));var A=lt(u);tt(A,()=>k()===!0,W=>{var U=Pt();y(W,U)});var X=$($(A,!0));tt(X,()=>I()===!0,W=>{var U=Tt();M(()=>h(U,"left",`${r(t(o))}%`)),y(W,U)});var O=$($(X,!0));tt(O,()=>K()===!0,W=>{var U=qt();M(()=>{h(U,"left",`${r(t(o)+t(b))}%`),h(U,"height",`${r(t(j))}px`),h(U,"bottom",`${r(-t(j)-w())}px`)}),y(W,U)});var Y=$($(O,!0)),F=D(Y),J=D(F);M(()=>ct(J,B()(q(n)))),M(()=>{bt(Y,`tick tick-${r(q(_))} svelte-fdkjmm`),H(Y,"style",`top:calc(100% + ${r(w())}px);`),h(Y,"left",`${r(t(o)+t(b))}%`),h(F,"top",`${r(t(j))}px`),h(F,"transform",`translate(calc(-50% + ${r(f())}px), ${r(P())}px)`)}),y(C,u)}),M(()=>Mt(z,"snapLabels",V())),y(N,z),it()}var It=R('<div class="gridline svelte-1jmrx3z" style="top:0;"></div>'),Ot=R('<div class="tick-mark svelte-1jmrx3z"></div>'),Ut=R('<div><!> <!> <div class="text svelte-1jmrx3z"> </div></div>'),Et=R('<div class="axis y-axis svelte-1jmrx3z"></div>');function ve(N,e){et(e,!1);const s={};nt(s);const i=()=>x(I,"$yScale",s),j=()=>x(K,"$xRange",s),l=p(),m=p(),b=p(),d=p(),S=p(),G=p(),Q=p(),{xRange:K,yScale:I}=at("LayerCake");let c=a(e,"tickMarks",0,!1),k=a(e,"labelPosition",0,"even"),V=a(e,"snapBaselineLabel",0,!1),B=a(e,"gridlines",0,!0),v=a(e,"tickMarkLength",0,void 0),w=a(e,"format",0,o=>o),f=a(e,"ticks",0,4),P=a(e,"tickGutter",0,0),z=a(e,"dx",0,0),C=a(e,"dy",8,()=>-3),n=a(e,"charPixelWidth",0,7.25);function _(o,A){return A===","||A==="."?o+n()*.5:o+n()}T(()=>i(),()=>{L(l,typeof i().bandwidth=="function")}),T(()=>(E(f()),t(l),i()),()=>{L(m,Array.isArray(f())?f():t(l)?i().domain():typeof f()=="function"?f()(i().ticks()):i().ticks(f()))}),T(()=>(t(m),E(w())),()=>{L(d,Math.max(10,Math.max(...t(m).map(o=>w()(o).toString().split("").reduce(_,0)))))}),T(()=>(E(c()),E(k()),E(v()),t(d)),()=>{L(b,c()===!0?k()==="above"?v()??t(d):v()??6:0)}),T(()=>(E(P()),E(k()),t(d),t(b)),()=>{L(S,-P()-(k()==="above"?t(d):t(b)))}),T(()=>(t(l),i()),()=>{L(G,t(l)?i().bandwidth()/2:0)}),T(()=>(t(m),i()),()=>{L(Q,Math.max(...t(m).map(i())))}),ot(),st();var u=Et();rt(u,15,()=>t(m),(o,A)=>q(o),(o,A,X)=>{var O=Ut();const Y=g(()=>i()(q(A)));var F=D(O);tt(F,()=>B()===!0,dt=>{var Z=It();h(Z,"right","0px"),M(()=>h(Z,"left",`${r(t(S))}px`)),y(dt,Z)});var J=$($(F,!0));tt(J,()=>c()===!0,dt=>{var Z=Ot();h(Z,"top","0"),M(()=>{h(Z,"left",`${r(t(S))}px`),h(Z,"width",`${r(t(b))}px`)}),y(dt,Z)});var W=$($(J,!0));h(W,"top","0");var U=D(W);M(()=>ct(U,w()(q(A)))),M(()=>{bt(O,`tick tick-${r(q(X))} svelte-1jmrx3z`),H(O,"style",`left:${r(j()[0])}%;top:${r(t(Y)+t(G))}%;`),h(W,"text-align",k()==="even"?"right":"left"),h(W,"width",`${r(t(d))}px`),h(W,"left",`${r(-t(d)-P()-(k()==="even"?t(b):0))}px`),h(W,"transform",`translate(${r(z()+(k()==="even"?-3:0))}px, calc(-50% + ${r(C()+(k()==="above"||V()===!0&&t(Y)===t(Q)?-3:4))}px))`)}),y(o,O)}),y(N,u),it()}var Nt=R('<div class="circle svelte-icbw6q"></div>'),Qt=R('<div class="scatter-group"></div>');function fe(N,e){et(e,!1);const s={};nt(s);const i=()=>x(t(S),"$data",s),j=()=>x(G,"$xGet",s),l=()=>x(K,"$xScale",s),m=()=>x(Q,"$yGet",s),b=()=>x(I,"$yScale",s),d=at("LayerCake"),S=p(d.data),G=d.xGet,Q=d.yGet,K=d.xScale,I=d.yScale;let c=a(e,"r",0,5),k=a(e,"fill",0,"#0cf"),V=a(e,"stroke",0,"#000"),B=a(e,"strokeWidth",0,1);st();var v=Qt();rt(v,9,i,ft,(w,f,P)=>{var z=Nt();const C=g(()=>j()(q(f))+(l().bandwidth?l().bandwidth()/2:0)),n=g(()=>m()(q(f))+(b().bandwidth?b().bandwidth()/2:0)),_=g(()=>c()*2),u=g(()=>c()*2),o=g(k),A=g(B),X=g(V);M(()=>H(z,"style",`
				left: ${t(C)}%;
				top: ${t(n)}%;
				width: ${t(_)}px;
				height: ${t(u)}px;
				background-color: ${t(o)};
				border: ${t(A)}px solid ${t(X)};
			`)),y(w,z)}),y(N,v),it()}var Xt=R('<div class="bg svelte-19xh5jy"></div> <!>',1);function Yt(N,e){et(e,!1);const s={};nt(s);const i=()=>x(K,"$xGet",s),j=()=>x(I,"$yGet",s),l=()=>x(c,"$width",s),m=()=>x(k,"$height",s),b=()=>x(Q,"$data",s),d=p(),S=p(),G=p(),{data:Q,xGet:K,yGet:I,width:c,height:k}=at("LayerCake");let V=p(!1),B=p({}),v=p({}),w=a(e,"x",0,"x"),f=a(e,"y",0,"y"),P=a(e,"searchRadius",0,void 0),z=a(e,"dataset",0,void 0);function C(o){L(v,o);const A=`layer${w().toUpperCase()}`,X=`layer${f().toUpperCase()}`,O=o[A]/(w()==="x"?l():m())*100,Y=o[X]/(f()==="y"?m():l())*100;L(B,t(G).find(O,Y,P())||{}),L(V,Object.keys(t(B)).length>0)}T(()=>(E(w()),i(),j()),()=>{L(d,w()==="x"?i():j())}),T(()=>(E(f()),j(),i()),()=>{L(S,f()==="y"?j():i())}),T(()=>(l(),m(),t(d),t(S),E(z()),b()),()=>{L(G,Bt().extent([[-1,-1],[l()+1,m()+1]]).x(t(d)).y(t(S)).addAll(z()||b()))}),ot(),st();var n=Xt(),_=lt(n),u=$($(_,!0));vt(u,e.children,{get x(){return t(d)(t(B))||0},get y(){return t(S)(t(B))||0},get found(){return t(B)},get visible(){return t(V)},get e(){return t(v)}},null),xt("mousemove",_,C,!1),xt("mouseout",_,()=>L(V,!1),!1),xt("blur",_,()=>L(V,!1),!1),y(N,n),it()}var Dt=R('<div class="row"><span class="key svelte-1c2x1sz"> </span> </div>'),Ht=R('<div class="line svelte-1c2x1sz"></div> <div class="tooltip svelte-1c2x1sz"><div class="title svelte-1c2x1sz"> </div> <!></div>',1);function xe(N,e){et(e,!1);const s={};nt(s);const i=()=>x(G,"$config",s),j=()=>x(b,"$data",s),l=()=>x(d,"$width",s),m=()=>x(S,"$yScale",s),{data:b,width:d,yScale:S,config:G}=at("LayerCake"),Q=Ct(","),K=n=>n.replace(/^\w/,_=>_.toUpperCase());let I=a(e,"formatTitle",0,n=>n),c=a(e,"formatKey",0,n=>K(n)),k=a(e,"formatValue",0,n=>isNaN(+n)?n:Q(n)),V=a(e,"offset",8,()=>-20),B=a(e,"dataset",0,void 0);const v=150,w=v/2;function f(n){return Object.keys(n).length===0?[]:Object.keys(n).filter(u=>u!==i().x).map(u=>({key:u,value:n[u]})).sort((u,o)=>o.value-u.value)}st();var P=_t(),z=lt(P),C=zt(()=>B()||j());Yt(z,{get dataset(){return t(C)},y:"x",children:(n,_)=>{const u=g(()=>_.x),o=g(()=>_.visible),A=g(()=>_.found);var X=_t();const O=g(()=>f(t(A)));var Y=lt(X);tt(Y,()=>t(o)===!0,F=>{var J=Ht(),W=lt(J),U=$($(W,!0));const dt=g(()=>v),Z=g(()=>t(o)?"block":"none"),kt=g(()=>m()(t(O)[0].value)),wt=g(V),$t=g(()=>Math.min(Math.max(w,t(u)/100*l()),l()-w));M(()=>H(U,"style",`
        width:${t(dt)}px;
        display: ${t(Z)};
        top:calc(${t(kt)}% + ${t(wt)}px);
        left:${t($t)}px;`));var ut=D(U),St=D(ut);M(()=>ct(St,I()(t(A)[i().x])));var Gt=$($(ut,!0));rt(Gt,1,()=>t(O),ft,(Lt,ht,te)=>{var gt=Dt(),mt=D(gt),pt=D(mt);M(()=>ct(pt,`${r(c()(q(ht).key))}:`));var jt=$(mt,!0);M(()=>ct(jt,` ${r(k()(q(ht).value))}`)),y(Lt,gt)}),M(()=>H(W,"style",`left:${r(t(u)/100*l())}px;`)),y(F,J)}),y(n,X)}}),y(N,P),it()}var Ft=R('<div class="circle svelte-1j3utxh"></div>'),Jt=R('<div class="dot-row"><div class="line svelte-1j3utxh"></div> <!></div>'),Zt=R('<div class="dot-plot"></div>');function _e(N,e){et(e,!1);const s={};nt(s);const i=()=>x(k,"$yScale",s),j=()=>x(t(Q),"$data",s),l=()=>x(I,"$yGet",s),m=()=>x(K,"$xGet",s),b=()=>x(c,"$zScale",s),d=()=>x(V,"$config",s),S=p(),G=at("LayerCake"),Q=p(G.data),K=G.xGet,I=G.yGet,c=G.zScale,k=G.yScale,V=G.config;let B=a(e,"r",0,5);T(()=>i(),()=>{L(S,i().bandwidth()/2)}),ot(),st();var v=Zt();rt(v,9,j,ft,(w,f,P)=>{var z=Jt();const C=g(()=>l()(q(f))),n=g(()=>m()(q(f)));var _=D(z);const u=g(()=>Math.min(...t(n))),o=g(()=>t(C)+t(S)),A=g(()=>100-Math.max(...t(n)));M(()=>H(_,"style",`
					left: ${t(u)}%;
					top: ${t(o)}%;
					right: ${t(A)}%;
				`));var X=$($(_,!0));rt(X,1,()=>t(n),ft,(O,Y,F)=>{var J=Ft();M(()=>H(J,"style",`
						left: ${r(q(Y))}%;
						top: ${r(t(C)+t(S))}%;
						width: ${r(B()*2)}px;
						height: ${r(B()*2)}px;
						background: ${r(b()(d().x[q(F)]))};
					`)),y(O,J)}),y(w,z)}),y(N,v),it()}export{oe as A,_e as C,Yt as Q,de as S,ve as a,fe as b,xe as c};
