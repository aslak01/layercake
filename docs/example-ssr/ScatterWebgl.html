<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="description" content="Layer Cake" />
		<meta name='viewport' content='width=device-width,initial-scale=1.0'>
		<meta name='theme-color' content='#ff3e00'>

		<link rel='icon' type='image/png' href='/layercake-logo-100.png'>

		<meta property="og:site_name" content="https://layercake.graphics" />
		<meta property="og:type" content="article" />
		<meta name="twitter:card" content="summary_large_image" />

		<meta property="og:image" content="https://layercake.graphics/layercake-logo-1200.png" />
		<meta property="og:description" content="A framework for mostly-reusable graphics with svelte" />
		<meta name="description" content="A framework for mostly-reusable graphics with svelte">
		<meta name="keywords" content="layercake, graphics, svelte, graphics framework, svelte graphics framework, data viz, data visualization, reusable, mostly-reusable" />
		<meta property="og:url" content="https://layercake.graphics" />
		<link rel="shortcut icon" type="image/png" href="https://layercake.graphics/favicon.png">

		<meta name="twitter:site" content="https://layercake.graphics" />
		<meta name="twitter:image" content="https://layercake.graphics/layercake-logo-1200.png">

		<meta http-equiv="content-security-policy" content="">
		<link href="../_app/immutable/assets/_layout-7b48a4ef.css" rel="stylesheet">
		<link href="../_app/immutable/assets/GuideContents-48e964f9.css" rel="stylesheet">
		<link href="../_app/immutable/assets/_examples-3bba1895.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Brush-6c1d38e0.css" rel="stylesheet">
		<link href="../_app/immutable/assets/dots-ef082192.css" rel="stylesheet">
		<link href="../_app/immutable/assets/_examples_ssr-a9522c99.css" rel="stylesheet">
		<link href="../_app/immutable/assets/ClevelandDotPlot.percent-range-cce3ebed.css" rel="stylesheet">
		<link href="../_app/immutable/assets/_page-9463f5c9.css" rel="stylesheet">
		<link href="../_app/immutable/assets/cleanTitle-0901854a.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/start-5b5f5607.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index-21aa7309.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons-29647d23.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index-bca723fc.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/control-e7f5239e.js">
		<link rel="modulepreload" href="../_app/immutable/components/pages/_layout.svelte-67eba8b1.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/stores-fe609b92.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/GuideContents-ad20fbae.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_examples-5e3fdcf7.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Brush.html-2ffa0f64.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/dots-01970480.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/pointsFour-781db7ef.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_examples_ssr-c0678590.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/ClevelandDotPlot.percent-range.html-e094f274.js">
		<link rel="modulepreload" href="../_app/immutable/modules/pages/_layout.js-b811ea83.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index-4d8f42c1.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_layout-0dc3efab.js">
		<link rel="modulepreload" href="../_app/immutable/components/pages/example-ssr/_slug_/_page.svelte-918359b9.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/downloadBlob-8eb2957f.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/hljsDefineSvelte-185b3d8f.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/cleanTitle-bae4dae5.js">
		<link rel="modulepreload" href="../_app/immutable/modules/pages/example-ssr/_slug_/_page.js-17d49607.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_page-0142e5a3.js"><title>WebGL Scatter (svg axes, quadtree hover)</title><!-- HEAD_svelte-1ynzqk4_START --><!-- HEAD_svelte-1ynzqk4_END -->
	</head>
	<body>
		<div id="svelte">


<div class="closed mousecatcher svelte-6iinyn"></div>
<div class="container svelte-6iinyn"><span class="menu-link menu-closed svelte-6iinyn">Menu</span>
	<a href="/" sveltekit:prefetch class="logo svelte-6iinyn">Layer Cake</a></div>

<ul class="dropdown svelte-6iinyn"><li class="svelte-6iinyn">
		<select class="svelte-6iinyn"><option value="/">All</option><option class="header svelte-6iinyn" disabled value=""></option><option class="header svelte-6iinyn" disabled value="Client-side">Client-side</option><option value="/example/Bar">Bar</option><option value="/example/Beeswarm">Beeswarm</option><option value="/example/BeeswarmForce">Beeswarm, force layout</option><option value="/example/Brush">Brush</option><option value="/example/Calendar">Calendar</option><option value="/example/CirclePack">Circle pack</option><option value="/example/CirclePackForce">Circle pack, force layout</option><option value="/example/ClevelandDotPlot">Cleveland dot plot</option><option value="/example/Column">Column annotated</option><option value="/example/Histogram">Histogram</option><option value="/example/Line">Line + area</option><option value="/example/MapSvg">Map</option><option value="/example/MapLayered">Multilayer map</option><option value="/example/MultiLine">Multiline</option><option value="/example/CirclePackNested">Nested circle pack</option><option value="/example/Radar">Radar chart</option><option value="/example/Sankey">Sankey</option><option value="/example/Scatter">Scatter</option><option value="/example/SmallMultiples">Small multiples</option><option value="/example/AreaStacked">Stacked area</option><option value="/example/BarStacked">Stacked bar</option><option value="/example/ColumnStacked">Stacked column</option><option value="/example/SyncedBrush">Synced brush</option><option value="/example/Timeplot">Time of day plot</option><option value="/example/ScatterWebgl">WebGL Scatter</option><option class="header svelte-6iinyn" disabled value=""></option><option class="header svelte-6iinyn" disabled value="Server-side">Server-side</option><option value="/example-ssr/Bar">Bar</option><option value="/example-ssr/Brush">Brush</option><option value="/example-ssr/Calendar">Calendar</option><option value="/example-ssr/ClevelandDotPlot">Cleveland dot plot</option><option value="/example-ssr/Column">Column annotated</option><option value="/example-ssr/Histogram">Histogram</option><option value="/example-ssr/Line">Line + area</option><option value="/example-ssr/MapSvg">Map</option><option value="/example-ssr/MapLayered">Multilayer map</option><option value="/example-ssr/MultiLine">Multiline</option><option value="/example-ssr/Scatter">Scatter</option><option value="/example-ssr/SmallMultiples">Small multiples</option><option value="/example-ssr/AreaStacked">Stacked area</option><option value="/example-ssr/BarStacked">Stacked bar</option><option value="/example-ssr/ColumnStacked">Stacked column</option><option value="/example-ssr/SyncedBrush">Synced brush</option><option value="/example-ssr/Timeplot">Time of day plot</option><option value="/example-ssr/ScatterWebgl">WebGL Scatter</option></select></li></ul>

<nav class="closed svelte-6iinyn"><ul class="primary svelte-6iinyn"><li class="svelte-6iinyn"><a sveltekit:prefetch class=" svelte-6iinyn" href="/components"><span class="wide-name svelte-6iinyn">Component gallery</span><span class="short-name svelte-6iinyn">Components</span></a></li>
		<li class="svelte-6iinyn"><a sveltekit:prefetch class=" svelte-6iinyn" href="/guide">Guide</a></li>
		<li class="svelte-6iinyn"><a id="github-link" target="_blank" rel="noreferrer" href="https://github.com/mhkeller/layercake" class="svelte-6iinyn"></a></li></ul>

	<div class="secondary svelte-6iinyn"><ul class="guide-toc svelte-7hddv0"><li class="svelte-7hddv0"><a class="section  svelte-7hddv0" href="/guide#introduction">Introduction</a>
			<a class="subsection  svelte-7hddv0" href="/guide#what-is-layer-cake">What is Layer Cake?</a><a class="subsection  svelte-7hddv0" href="/guide#key-concepts">Key Concepts</a><a class="subsection  svelte-7hddv0" href="/guide#getting-started">Getting started</a><a class="subsection  svelte-7hddv0" href="/guide#using-layout-components">Using layout components</a><a class="subsection  svelte-7hddv0" href="/guide#layer-components">Layer components</a><a class="subsection  svelte-7hddv0" href="/guide#data-less-cakes">Data-less cakes</a><a class="subsection  svelte-7hddv0" href="/guide#server-side-rendering">Server-side rendering</a><a class="subsection  svelte-7hddv0" href="/guide#how-does-layercake-know-what-to-set-as-a-scale39s-domain-and-range">How does LayerCake know what to set as a scale's domain and range?</a>
		</li><li class="svelte-7hddv0"><a class="section  svelte-7hddv0" href="/guide#troubleshooting">Troubleshooting</a>
			<a class="subsection  svelte-7hddv0" href="/guide#use-the-debug-feature">Use the debug feature</a><a class="subsection  svelte-7hddv0" href="/guide#typescript">TypeScript</a><a class="subsection  svelte-7hddv0" href="/guide#the-chart-is-blank">The chart is blank</a><a class="subsection  svelte-7hddv0" href="/guide#the-chart-is-a-very-small-square">The chart is a very small square</a><a class="subsection  svelte-7hddv0" href="/guide#the-library-isn39t-building-properly">The library isn't building properly</a><a class="subsection  svelte-7hddv0" href="/guide#listening-for-click-events-on-the-entire-component">Listening for click events on the entire component</a>
		</li><li class="svelte-7hddv0"><a class="section  svelte-7hddv0" href="/guide#layercake-props">LayerCake props</a>
			<a class="subsection  svelte-7hddv0" href="/guide#data">data</a><a class="subsection  svelte-7hddv0" href="/guide#x">x</a><a class="subsection  svelte-7hddv0" href="/guide#y">y</a><a class="subsection  svelte-7hddv0" href="/guide#z">z</a><a class="subsection  svelte-7hddv0" href="/guide#r">r</a><a class="subsection  svelte-7hddv0" href="/guide#debug">debug</a><a class="subsection  svelte-7hddv0" href="/guide#padding">padding</a><a class="subsection  svelte-7hddv0" href="/guide#xscale">xScale</a><a class="subsection  svelte-7hddv0" href="/guide#yscale">yScale</a><a class="subsection  svelte-7hddv0" href="/guide#zscale">zScale</a><a class="subsection  svelte-7hddv0" href="/guide#rscale">rScale</a><a class="subsection  svelte-7hddv0" href="/guide#xdomain">xDomain</a><a class="subsection  svelte-7hddv0" href="/guide#ydomain">yDomain</a><a class="subsection  svelte-7hddv0" href="/guide#zdomain">zDomain</a><a class="subsection  svelte-7hddv0" href="/guide#rdomain">rDomain</a><a class="subsection  svelte-7hddv0" href="/guide#xreverse">xReverse</a><a class="subsection  svelte-7hddv0" href="/guide#yreverse">yReverse</a><a class="subsection  svelte-7hddv0" href="/guide#zreverse">zReverse</a><a class="subsection  svelte-7hddv0" href="/guide#rreverse">rReverse</a><a class="subsection  svelte-7hddv0" href="/guide#xrange">xRange</a><a class="subsection  svelte-7hddv0" href="/guide#yrange">yRange</a><a class="subsection  svelte-7hddv0" href="/guide#zrange">zRange</a><a class="subsection  svelte-7hddv0" href="/guide#rrange">rRange</a><a class="subsection  svelte-7hddv0" href="/guide#xpadding">xPadding</a><a class="subsection  svelte-7hddv0" href="/guide#ypadding">yPadding</a><a class="subsection  svelte-7hddv0" href="/guide#zpadding">zPadding</a><a class="subsection  svelte-7hddv0" href="/guide#rpadding">rPadding</a><a class="subsection  svelte-7hddv0" href="/guide#xnice">xNice</a><a class="subsection  svelte-7hddv0" href="/guide#ynice">yNice</a><a class="subsection  svelte-7hddv0" href="/guide#znice">zNice</a><a class="subsection  svelte-7hddv0" href="/guide#rnice">rNice</a><a class="subsection  svelte-7hddv0" href="/guide#extents">extents</a><a class="subsection  svelte-7hddv0" href="/guide#flatdata">flatData</a><a class="subsection  svelte-7hddv0" href="/guide#ssr">ssr</a><a class="subsection  svelte-7hddv0" href="/guide#percentrange">percentRange</a><a class="subsection  svelte-7hddv0" href="/guide#position">position</a><a class="subsection  svelte-7hddv0" href="/guide#custom">custom</a>
		</li><li class="svelte-7hddv0"><a class="section  svelte-7hddv0" href="/guide#computed-context-values">Computed context values</a>
			<a class="subsection  svelte-7hddv0" href="/guide#activegetters">activeGetters</a><a class="subsection  svelte-7hddv0" href="/guide#aspectratio">aspectRatio</a><a class="subsection  svelte-7hddv0" href="/guide#box">box</a><a class="subsection  svelte-7hddv0" href="/guide#config">config</a><a class="subsection  svelte-7hddv0" href="/guide#containerwidth">containerWidth</a><a class="subsection  svelte-7hddv0" href="/guide#containerheight">containerHeight</a><a class="subsection  svelte-7hddv0" href="/guide#extents-1">extents</a><a class="subsection  svelte-7hddv0" href="/guide#width">width</a><a class="subsection  svelte-7hddv0" href="/guide#height">height</a><a class="subsection  svelte-7hddv0" href="/guide#x-1">x</a><a class="subsection  svelte-7hddv0" href="/guide#y-1">y</a><a class="subsection  svelte-7hddv0" href="/guide#z-1">z</a><a class="subsection  svelte-7hddv0" href="/guide#r-1">r</a><a class="subsection  svelte-7hddv0" href="/guide#xdomain-1">xDomain</a><a class="subsection  svelte-7hddv0" href="/guide#ydomain-1">yDomain</a><a class="subsection  svelte-7hddv0" href="/guide#zdomain-1">zDomain</a><a class="subsection  svelte-7hddv0" href="/guide#rdomain-1">rDomain</a><a class="subsection  svelte-7hddv0" href="/guide#xrange-1">xRange</a><a class="subsection  svelte-7hddv0" href="/guide#yrange-1">yRange</a><a class="subsection  svelte-7hddv0" href="/guide#zrange-1">zRange</a><a class="subsection  svelte-7hddv0" href="/guide#rrange-1">rRange</a><a class="subsection  svelte-7hddv0" href="/guide#xget">xGet(...)</a><a class="subsection  svelte-7hddv0" href="/guide#yget">yGet(...)</a><a class="subsection  svelte-7hddv0" href="/guide#zget">zGet(...)</a><a class="subsection  svelte-7hddv0" href="/guide#rget">rGet(...)</a><a class="subsection  svelte-7hddv0" href="/guide#xscale-1">xScale(...)</a><a class="subsection  svelte-7hddv0" href="/guide#yscale-1">yScale(...)</a><a class="subsection  svelte-7hddv0" href="/guide#zscale-1">zScale(...)</a><a class="subsection  svelte-7hddv0" href="/guide#rscale-1">rScale(...)</a>
		</li><li class="svelte-7hddv0"><a class="section  svelte-7hddv0" href="/guide#layout-components">Layout components</a>
			<a class="subsection  svelte-7hddv0" href="/guide#html">Html</a><a class="subsection  svelte-7hddv0" href="/guide#svg">Svg</a><a class="subsection  svelte-7hddv0" href="/guide#scaledsvg">ScaledSvg</a><a class="subsection  svelte-7hddv0" href="/guide#canvas">Canvas</a><a class="subsection  svelte-7hddv0" href="/guide#webgl">WebGL</a>
		</li><li class="svelte-7hddv0"><a class="section  svelte-7hddv0" href="/guide#layout-component-props">Layout component props</a>
			<a class="subsection  svelte-7hddv0" href="/guide#zindex">zIndex</a><a class="subsection  svelte-7hddv0" href="/guide#pointerevents">pointerEvents</a><a class="subsection  svelte-7hddv0" href="/guide#viewbox">viewBox</a><a class="subsection  svelte-7hddv0" href="/guide#fixedaspectratio">fixedAspectRatio</a><a class="subsection  svelte-7hddv0" href="/guide#contextattributes">contextAttributes</a>
		</li><li class="svelte-7hddv0"><a class="section  svelte-7hddv0" href="/guide#helper-functions">Helper functions</a>
			<a class="subsection  svelte-7hddv0" href="/guide#bin">bin(...)</a><a class="subsection  svelte-7hddv0" href="/guide#calcextents">calcExtents(...)</a><a class="subsection  svelte-7hddv0" href="/guide#calcuniques">calcUniques(...)</a><a class="subsection  svelte-7hddv0" href="/guide#flatten">flatten(...)</a><a class="subsection  svelte-7hddv0" href="/guide#grouplonger">groupLonger(...)</a><a class="subsection  svelte-7hddv0" href="/guide#raise">raise(...)</a><a class="subsection  svelte-7hddv0" href="/guide#scalecanvas">scaleCanvas(...)</a><a class="subsection  svelte-7hddv0" href="/guide#stack">stack(...)</a><a class="subsection  svelte-7hddv0" href="/guide#uniques">uniques(...)</a>
		</li></ul></div></nav>
<main>

<div class="main svelte-1mot5qb" data-label="Server-side"><h1>WebGL Scatter (svg axes, quadtree hover)<a class="edit-repl svelte-1mot5qb" href="https://svelte.dev/repl/1969b7c74b124445ad9d55ad28542cd6?version=3.46.2" target="_blank" rel="noreferrer">Edit</a></h1>

	<div class="chart-hero svelte-1mot5qb" data-slug="scatterwebgl"><div class="chart-container svelte-va9vq4">


<div class="layercake-container svelte-vhzpsp" style="position: absolute; top: 0; right: 0; bottom: 0; left: 0;">


<div class="layercake-layout-html svelte-1bu60uu" style="top: 5px; right: 5px; bottom: 20px; left: 25px;">


<div class="axis x-axis svelte-fgaa75"><div class="gridline svelte-fgaa75" style="left:8.378378378378336%;top: 0px;bottom: 0;"></div>
		
		<div class="tick tick-0 svelte-fgaa75" style="left:8.378378378378336%;top:100%;"><div class="text svelte-fgaa75" style="top:7px;">1980</div>
		</div><div class="gridline svelte-fgaa75" style="left:20.27027027027024%;top: 0px;bottom: 0;"></div>
		
		<div class="tick tick-1 svelte-fgaa75" style="left:20.27027027027024%;top:100%;"><div class="text svelte-fgaa75" style="top:7px;">1985</div>
		</div><div class="gridline svelte-fgaa75" style="left:32.16216216216215%;top: 0px;bottom: 0;"></div>
		
		<div class="tick tick-2 svelte-fgaa75" style="left:32.16216216216215%;top:100%;"><div class="text svelte-fgaa75" style="top:7px;">1990</div>
		</div><div class="gridline svelte-fgaa75" style="left:44.05405405405405%;top: 0px;bottom: 0;"></div>
		
		<div class="tick tick-3 svelte-fgaa75" style="left:44.05405405405405%;top:100%;"><div class="text svelte-fgaa75" style="top:7px;">1995</div>
		</div><div class="gridline svelte-fgaa75" style="left:55.94594594594595%;top: 0px;bottom: 0;"></div>
		
		<div class="tick tick-4 svelte-fgaa75" style="left:55.94594594594595%;top:100%;"><div class="text svelte-fgaa75" style="top:7px;">2000</div>
		</div><div class="gridline svelte-fgaa75" style="left:67.83783783783785%;top: 0px;bottom: 0;"></div>
		
		<div class="tick tick-5 svelte-fgaa75" style="left:67.83783783783785%;top:100%;"><div class="text svelte-fgaa75" style="top:7px;">2005</div>
		</div><div class="gridline svelte-fgaa75" style="left:79.72972972972975%;top: 0px;bottom: 0;"></div>
		
		<div class="tick tick-6 svelte-fgaa75" style="left:79.72972972972975%;top:100%;"><div class="text svelte-fgaa75" style="top:7px;">2010</div>
		</div><div class="gridline svelte-fgaa75" style="left:91.62162162162166%;top: 0px;bottom: 0;"></div>
		
		<div class="tick tick-7 svelte-fgaa75" style="left:91.62162162162166%;top:100%;"><div class="text svelte-fgaa75" style="top:7px;">2015</div>
		</div>
	
</div>
			


<div class="axis y-axis svelte-1e3rg42" style="transform:translate(-25px, 0)"><div class="tick tick-0 svelte-1e3rg42" style="top:86.13176470588235%;left:0%;"><div class="gridline svelte-1e3rg42" style="top:0;left:0px;right:-30px;"></div>
			
			
			<div class="text svelte-1e3rg42" style="top:-1px; left:0px; transform: translate(0, -100%);">4</div>
		</div><div class="tick tick-1 svelte-1e3rg42" style="top:65.42588235294117%;left:0%;"><div class="gridline svelte-1e3rg42" style="top:0;left:0px;right:-30px;"></div>
			
			
			<div class="text svelte-1e3rg42" style="top:-1px; left:0px; transform: translate(0, -100%);">5</div>
		</div><div class="tick tick-2 svelte-1e3rg42" style="top:44.720000000000006%;left:0%;"><div class="gridline svelte-1e3rg42" style="top:0;left:0px;right:-30px;"></div>
			
			
			<div class="text svelte-1e3rg42" style="top:-1px; left:0px; transform: translate(0, -100%);">6</div>
		</div><div class="tick tick-3 svelte-1e3rg42" style="top:24.014117647058832%;left:0%;"><div class="gridline svelte-1e3rg42" style="top:0;left:0px;right:-30px;"></div>
			
			
			<div class="text svelte-1e3rg42" style="top:-1px; left:0px; transform: translate(0, -100%);">7</div>
		</div><div class="tick tick-4 svelte-1e3rg42" style="top:3.3082352941176563%;left:0%;"><div class="gridline svelte-1e3rg42" style="top:0;left:0px;right:-30px;"></div>
			
			
			<div class="text svelte-1e3rg42" style="top:-1px; left:0px; transform: translate(0, -100%);">8</div>
		</div>
</div>
</div></div>

	


</div></div>

	<div class="download svelte-1mot5qb"><button  title="download zip file" class="icon svelte-1gef78k" style="background-image: url(/icons/download.svg)">Download      </button></div>

	

	<div id="pages" class=" svelte-1mot5qb"><ul id="page-nav" class="svelte-1mot5qb"><li class="tab active svelte-1mot5qb">+page.svelte</li><li class="tab  svelte-1mot5qb">./_components/Scatter.webgl.svelte</li><li class="tab  svelte-1mot5qb">./_components/AxisX.html.svelte</li><li class="tab  svelte-1mot5qb">./_components/AxisY.html.svelte</li><li class="tab  svelte-1mot5qb">./_components/QuadTree.html.svelte</li><li class="tab  svelte-1mot5qb">./_data/points.csv</li></ul>
		<div id="contents-container" class="svelte-1mot5qb"><div class="copy svelte-1mot5qb"></div>
			<div class="contents" style="display: block;"><pre class="svelte-1mot5qb"><!-- HTML_TAG_START --><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><span class="language-javascript">
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">LayerCake</span>, <span class="hljs-title class_">WebGL</span>, <span class="hljs-title class_">Html</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;layercake&#x27;</span>;

  <span class="hljs-keyword">import</span> <span class="hljs-title class_">ScatterWebGL</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./_components/Scatter.webgl.svelte&#x27;</span>;
  <span class="hljs-keyword">import</span> <span class="hljs-title class_">AxisX</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./_components/AxisX.html.svelte&#x27;</span>;
  <span class="hljs-keyword">import</span> <span class="hljs-title class_">AxisY</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./_components/AxisY.html.svelte&#x27;</span>;
  <span class="hljs-keyword">import</span> <span class="hljs-title class_">QuadTree</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./_components/QuadTree.html.svelte&#x27;</span>;

  <span class="hljs-comment">// This example loads csv data as json using @rollup/plugin-dsv</span>
  <span class="hljs-keyword">import</span> data <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./_data/points.csv&#x27;</span>;

  <span class="hljs-keyword">const</span> xKey = <span class="hljs-string">&#x27;myX&#x27;</span>;
  <span class="hljs-keyword">const</span> yKey = <span class="hljs-string">&#x27;myY&#x27;</span>;

  <span class="hljs-keyword">const</span> r = <span class="hljs-number">3</span>;
  <span class="hljs-keyword">const</span> padding = <span class="hljs-number">6</span>;

  data.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> {
    d[yKey] = +d[yKey];
  });
</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span></span><span class="language-css">
  <span class="hljs-comment">/*
    The wrapper div needs to have an explicit width and height in CSS.
    It can also be a flexbox child or CSS grid element.
    The point being it needs dimensions since the &lt;LayerCake&gt; element will
    expand to fill it.
  */</span>
  <span class="hljs-selector-class">.chart-container</span> {
    <span class="hljs-attribute">position</span>: relative;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
  }

  <span class="hljs-selector-class">.circle</span> {
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">171</span>,<span class="hljs-number">0</span>, <span class="hljs-number">214</span>);
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);
    <span class="hljs-attribute">pointer-events</span>: none;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span>;
  }
</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;chart-container&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">LayerCake</span>
    <span class="hljs-attr">position</span>=</span></span><span class="language-javascript">{<span class="hljs-string">&#x27;absolute&#x27;</span>}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">ssr</span>=</span></span><span class="language-javascript">{<span class="hljs-literal">true</span>}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">percentRange</span>=</span></span><span class="language-javascript">{<span class="hljs-literal">true</span>}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">padding</span>=</span></span><span class="language-javascript">{{ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">25</span> }}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">x</span>=</span></span><span class="language-javascript">{xKey}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">y</span>=</span></span><span class="language-javascript">{yKey}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">xPadding</span>=</span></span><span class="language-javascript">{[padding, padding]}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">yPadding</span>=</span></span><span class="language-javascript">{[padding, padding]}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">data</span>=</span></span><span class="language-javascript">{data}</span><span class="language-xml"><span class="hljs-tag">
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AxisX</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AxisY</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Html</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">LayerCake</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">LayerCake</span>
    <span class="hljs-attr">position</span>=</span></span><span class="language-javascript">{<span class="hljs-string">&#x27;absolute&#x27;</span>}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">padding</span>=</span></span><span class="language-javascript">{{ <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">25</span> }}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">x</span>=</span></span><span class="language-javascript">{xKey}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">y</span>=</span></span><span class="language-javascript">{yKey}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">xPadding</span>=</span></span><span class="language-javascript">{[padding, padding]}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">yPadding</span>=</span></span><span class="language-javascript">{[padding, padding]}</span><span class="language-xml"><span class="hljs-tag">
    <span class="hljs-attr">data</span>=</span></span><span class="language-javascript">{data}</span><span class="language-xml"><span class="hljs-tag">
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">WebGL</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ScatterWebGL</span>
        </span></span><span class="language-javascript">{r}</span><span class="language-xml"><span class="hljs-tag">
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">WebGL</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">Html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">QuadTree</span>
        <span class="hljs-attr">let:x</span>
        <span class="hljs-attr">let:y</span>
        <span class="hljs-attr">let:visible</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;circle&quot;</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;top:</span></span></span><span class="language-javascript">{y}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px;left:</span></span></span><span class="language-javascript">{x}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px;display: </span></span></span><span class="language-javascript">{ visible ? <span class="hljs-string">&#x27;block&#x27;</span> : <span class="hljs-string">&#x27;none&#x27;</span> }</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">;&quot;</span>
        &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">QuadTree</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Html</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">LayerCake</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><!-- HTML_TAG_END --></pre>
				</div><div class="contents" style="display: none;"><pre class="svelte-1mot5qb"><!-- HTML_TAG_START --><span class="hljs-comment">&lt;!--
  @component
  Generates a a WebGl scatter plot.
 --&gt;</span><span class="language-xml">
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><span class="language-javascript">
  <span class="hljs-keyword">import</span> reglWrapper <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;regl&#x27;</span>;
  <span class="hljs-keyword">import</span> { getContext } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;svelte&#x27;</span>;

  <span class="hljs-keyword">const</span> { data, xGet, yGet, width, height } = <span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;LayerCake&#x27;</span>);

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Number</span>} [r=5] - The circle&#x27;s radius. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> r = <span class="hljs-number">5</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">String</span>} [fill=&#x27;#0cf&#x27;] - The circle&#x27;s fill color. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> fill = <span class="hljs-string">&#x27;#0cf&#x27;</span>;

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> stroke = <span class="hljs-string">&#x27;#000&#x27;</span>; <span class="hljs-comment">// Not yet implemented</span>
  <span class="hljs-comment">// export let strokeWidth = 0;</span>

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">hexToRgbPercent</span> (hex) {
    <span class="hljs-keyword">let</span> str = hex.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&#x27;#&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>);
    <span class="hljs-keyword">if</span> (str.<span class="hljs-property">length</span> === <span class="hljs-number">3</span>) {
      str = str[<span class="hljs-number">0</span>] + str[<span class="hljs-number">0</span>] + str[<span class="hljs-number">1</span>] + str[<span class="hljs-number">1</span>] + str[<span class="hljs-number">2</span>] + str[<span class="hljs-number">2</span>];
    }
    <span class="hljs-keyword">return</span> str.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/.{1,2}/g</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> <span class="hljs-built_in">parseInt</span>(d, <span class="hljs-number">16</span>) / <span class="hljs-number">255</span>);
  }

  <span class="hljs-keyword">const</span> { gl } = <span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;gl&#x27;</span>);

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">resize</span> () {
    <span class="hljs-keyword">if</span> ($gl) {
      <span class="hljs-keyword">const</span> canvas = $gl.<span class="hljs-property">canvas</span>;
      <span class="hljs-comment">// Lookup the size the browser is displaying the canvas.</span>
      <span class="hljs-keyword">const</span> displayWidth = canvas.<span class="hljs-property">clientWidth</span>;
      <span class="hljs-keyword">const</span> displayHeight = canvas.<span class="hljs-property">clientHeight</span>;

      <span class="hljs-comment">// Check if the canvas is not the same size.</span>
      <span class="hljs-keyword">if</span> (canvas.<span class="hljs-property">width</span> !== displayWidth || canvas.<span class="hljs-property">height</span> !== displayHeight) {
        <span class="hljs-comment">// Make the canvas the same size</span>
        canvas.<span class="hljs-property">width</span> = displayWidth;
        canvas.<span class="hljs-property">height</span> = displayHeight;
      }
      $gl.<span class="hljs-title function_">viewport</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.<span class="hljs-property">width</span>, canvas.<span class="hljs-property">height</span>);
    }
  }

  <span class="hljs-keyword">let</span> regl;

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span> () {
    <span class="hljs-keyword">if</span> ($gl) {
      regl = <span class="hljs-title function_">reglWrapper</span>({
        <span class="hljs-attr">gl</span>: $gl,
        <span class="hljs-attr">extensions</span>: [<span class="hljs-string">&#x27;oes_standard_derivatives&#x27;</span>]
      });

      regl.<span class="hljs-title function_">clear</span>({
        <span class="hljs-attr">color</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
        <span class="hljs-attr">depth</span>: <span class="hljs-number">1</span>
      });

      <span class="hljs-keyword">const</span> draw = <span class="hljs-title function_">regl</span>({
        <span class="hljs-comment">// circle code comes from:</span>
        <span class="hljs-comment">// https://www.desultoryquest.com/blog/drawing-anti-aliased-circular-points-using-opengl-slash-webgl/</span>
        <span class="hljs-attr">frag</span>: <span class="hljs-string">`
        #extension GL_OES_standard_derivatives : enable
        precision mediump float;
        uniform vec3 fill_color;
        uniform vec3 stroke_color;
        varying float s_s;
        void main () {

          vec2 cxy = 2.0 * gl_PointCoord - 1.0;

          float dist = dot(cxy, cxy);

          float delta = fwidth(dist);

          float alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, dist);

          float outer_edge_center = 1.0 - s_s;
          float stroke = 1.0 - smoothstep(outer_edge_center - delta, outer_edge_center + delta, dist);

          // gl_FragColor = vec4(fill_color,1.0) * alpha;
          gl_FragColor = vec4( mix(stroke_color, fill_color, stroke), 1.0 ) * alpha;
          gl_FragColor.rgb *= gl_FragColor.a;
        }`</span>,
        <span class="hljs-attr">vert</span>: <span class="hljs-string">`
        precision mediump float;
        attribute vec2 position;
        attribute float r;
        attribute float stroke_size;

        varying float s_s;

        uniform float stage_width;
        uniform float stage_height;

        // http://peterbeshai.com/beautifully-animate-points-with-webgl-and-regl.html
        vec2 normalizeCoords(vec2 position) {
          // read in the positions into x and y vars
          float x = position[0];
          float y = position[1];
          return vec2(
            2.0 * ((x / stage_width) - 0.5),
            // invert y to treat [0,0] as bottom left in pixel space
            -(2.0 * ((y / stage_height) - 0.5))
          );
        }

        void main () {
          s_s = stroke_size;
          gl_PointSize = r;
          gl_Position = vec4(normalizeCoords(position), 0.0, 1.0);
        }`</span>,
        <span class="hljs-attr">attributes</span>: {
          <span class="hljs-comment">// There will be a position value for each point</span>
          <span class="hljs-comment">// we pass in</span>
          <span class="hljs-attr">position</span>: <span class="hljs-function">(<span class="hljs-params">context, props</span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> props.<span class="hljs-property">points</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">point</span> =&gt;</span> {
              <span class="hljs-keyword">return</span> [$xGet(point), $yGet(point)];
            });
          },
          <span class="hljs-attr">r</span>: <span class="hljs-function">(<span class="hljs-params">context, props</span>) =&gt;</span> {
            <span class="hljs-comment">// const m = window.devicePixelRatio &gt; 1 ? 4.0 : 2.0</span>
            <span class="hljs-comment">// If using an r-scale, set width here</span>
            <span class="hljs-keyword">return</span> props.<span class="hljs-property">points</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">point</span> =&gt;</span> props.<span class="hljs-property">pointWidth</span>);
          },
          <span class="hljs-attr">stroke_size</span>: <span class="hljs-function">(<span class="hljs-params">context, props</span>) =&gt;</span> {
            <span class="hljs-comment">// If using an r-scale, set width here</span>
            <span class="hljs-keyword">return</span> props.<span class="hljs-property">points</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">point</span> =&gt;</span> <span class="hljs-number">0</span>);
          }
        },
        <span class="hljs-attr">uniforms</span>: {
          <span class="hljs-attr">fill_color</span>: <span class="hljs-title function_">hexToRgbPercent</span>(fill),
          <span class="hljs-comment">// stroke_color: [0.6705882352941176, 0, 0.8392156862745098],</span>
          <span class="hljs-attr">stroke_color</span>: <span class="hljs-title function_">hexToRgbPercent</span>(stroke),
          <span class="hljs-comment">// FYI: there is a helper method for grabbing</span>
          <span class="hljs-comment">// values out of the context as well.</span>
          <span class="hljs-comment">// These uniforms are used in our fragment shader to</span>
          <span class="hljs-comment">// convert our x / y values to WebGL coordinate space.</span>
          <span class="hljs-attr">stage_width</span>: regl.<span class="hljs-title function_">context</span>(<span class="hljs-string">&#x27;drawingBufferWidth&#x27;</span>),
          <span class="hljs-attr">stage_height</span>: regl.<span class="hljs-title function_">context</span>(<span class="hljs-string">&#x27;drawingBufferHeight&#x27;</span>)
        },
        <span class="hljs-attr">count</span>: <span class="hljs-function">(<span class="hljs-params">context, props</span>) =&gt;</span> {
          <span class="hljs-comment">// set the count based on the number of points we have</span>
          <span class="hljs-keyword">return</span> props.<span class="hljs-property">points</span>.<span class="hljs-property">length</span>;
        },
        <span class="hljs-attr">primitive</span>: <span class="hljs-string">&#x27;points&#x27;</span>,
        <span class="hljs-attr">blend</span>: {
          <span class="hljs-attr">enable</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">func</span>: {
            <span class="hljs-attr">srcRGB</span>: <span class="hljs-string">&#x27;src alpha&#x27;</span>,
            <span class="hljs-attr">srcAlpha</span>: <span class="hljs-string">&#x27;src alpha&#x27;</span>,
            <span class="hljs-attr">dstRGB</span>: <span class="hljs-string">&#x27;one minus src alpha&#x27;</span>,
            <span class="hljs-attr">dstAlpha</span>: <span class="hljs-string">&#x27;one minus src alpha&#x27;</span>
          }
        },
        <span class="hljs-attr">depth</span>: { <span class="hljs-attr">enable</span>: <span class="hljs-literal">false</span> }
      });

      <span class="hljs-title function_">draw</span>({
        <span class="hljs-attr">pointWidth</span>: r * <span class="hljs-number">2</span>,
        <span class="hljs-attr">points</span>: $data
      });
    }
  }
</span><span class="hljs-keyword">
  $: </span><span class="language-javascript">($width, $height, $gl, <span class="hljs-title function_">resize</span>(), <span class="hljs-title function_">render</span>());
</span><span class="language-xml">
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><!-- HTML_TAG_END --></pre>
				</div><div class="contents" style="display: none;"><pre class="svelte-1mot5qb"><!-- HTML_TAG_START --><span class="hljs-comment">&lt;!--
  @component
  Generates an HTML x-axis, useful for server-side rendered charts.  This component is also configured to detect if your x-scale is an ordinal scale. If so, it will place the markers in the middle of the bandwidth.
 --&gt;</span><span class="language-xml">
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><span class="language-javascript">
  <span class="hljs-keyword">import</span> { getContext } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;svelte&#x27;</span>;

  <span class="hljs-keyword">const</span> { xScale } = <span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;LayerCake&#x27;</span>);

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Boolean</span>} [gridlines=true] - Extend lines from the ticks into the chart space. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> gridlines = <span class="hljs-literal">true</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Boolean</span>} [tickMarks=false] - Show a vertical mark for each tick. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> tickMarks = <span class="hljs-literal">false</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Boolean</span>} [baseline=false] – Show a solid line at the bottom. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> baseline = <span class="hljs-literal">false</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Boolean</span>} [snapTicks=false] - Instead of centering the text on the first and the last items, align them to the edges of the chart. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> snapTicks = <span class="hljs-literal">false</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Function</span>} [formatTick=d =&gt; d] - A function that passes the current tick value and expects a nicely formatted value in return. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> <span class="hljs-title function_">formatTick</span> = d =&gt; d;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Number|Array|Function</span>} [ticks] - If this is a number, it passes that along to the [d3Scale.ticks](https://github.com/d3/d3-scale) function. If this is an array, hardcodes the ticks to those values. If it&#x27;s a function, passes along the default tick values and expects an array of tick values in return. If nothing, it uses the default ticks supplied by the D3 function. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> ticks = <span class="hljs-literal">undefined</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Number</span>} [yTick=7] - The distance from the baseline to place each tick value, in pixels. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> yTick = <span class="hljs-number">7</span>;
</span><span class="hljs-keyword">
  $: </span><span class="language-javascript">isBandwidth = <span class="hljs-keyword">typeof</span> $xScale.<span class="hljs-property">bandwidth</span> === <span class="hljs-string">&#x27;function&#x27;</span>;
</span><span class="hljs-keyword">
  $: </span><span class="language-javascript">tickVals = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(ticks) ? ticks :
    isBandwidth ?
      $xScale.<span class="hljs-title function_">domain</span>() :
      <span class="hljs-keyword">typeof</span> ticks === <span class="hljs-string">&#x27;function&#x27;</span> ?
        <span class="hljs-title function_">ticks</span>($xScale.<span class="hljs-title function_">ticks</span>()) :
          $xScale.<span class="hljs-title function_">ticks</span>(ticks);
</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&#x27;axis x-axis&#x27;</span> <span class="hljs-attr">class:snapTicks</span>&gt;</span>
  </span><span class="language-javascript">{</span><span class="hljs-keyword">#each</span><span class="language-javascript"> tickVals <span class="hljs-keyword">as</span> tick, i (tick)}</span><span class="language-xml">
    </span><span class="language-javascript">{</span><span class="hljs-keyword">#if</span><span class="language-javascript"> gridlines !== <span class="hljs-literal">false</span>}</span><span class="language-xml">
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gridline&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;left:</span></span></span><span class="language-javascript">{$xScale(tick)}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">%;top: 0px;bottom: 0;&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    </span><span class="language-javascript">{</span><span class="hljs-keyword">/if</span><span class="language-javascript">}</span><span class="language-xml">
    </span><span class="language-javascript">{</span><span class="hljs-keyword">#if</span><span class="language-javascript"> tickMarks === <span class="hljs-literal">true</span>}</span><span class="language-xml">
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tick-mark&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;left:</span></span></span><span class="language-javascript">{$xScale(tick) + (isBandwidth ? $xScale.<span class="hljs-title function_">bandwidth</span>() / <span class="hljs-number">2</span> : <span class="hljs-number">0</span>)}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">%;height:6px;bottom: -6px;&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    </span><span class="language-javascript">{</span><span class="hljs-keyword">/if</span><span class="language-javascript">}</span><span class="language-xml">
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">&#x27;tick tick-</span></span></span><span class="language-javascript">{ i }</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&#x27;</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;left:</span></span></span><span class="language-javascript">{$xScale(tick) + (isBandwidth ? $xScale.<span class="hljs-title function_">bandwidth</span>() / <span class="hljs-number">2</span> : <span class="hljs-number">0</span>)}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">%;top:100%;&#x27;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text&quot;</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;top:</span></span></span><span class="language-javascript">{(yTick)}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px;&#x27;</span>&gt;</span></span><span class="language-javascript">{<span class="hljs-title function_">formatTick</span>(tick)}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  </span><span class="language-javascript">{</span><span class="hljs-keyword">/each</span><span class="language-javascript">}</span><span class="language-xml">
  </span><span class="language-javascript">{</span><span class="hljs-keyword">#if</span><span class="language-javascript"> baseline === <span class="hljs-literal">true</span>}</span><span class="language-xml">
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;baseline&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;top: 100%;width: 100%;&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  </span><span class="language-javascript">{</span><span class="hljs-keyword">/if</span><span class="language-javascript">}</span><span class="language-xml">
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span></span><span class="language-css">
  <span class="hljs-selector-class">.axis</span>,
  <span class="hljs-selector-class">.tick</span>,
  <span class="hljs-selector-class">.tick-mark</span>,
  <span class="hljs-selector-class">.gridline</span>,
  <span class="hljs-selector-class">.baseline</span> {
    <span class="hljs-attribute">position</span>: absolute;
  }
  <span class="hljs-selector-class">.axis</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  }
  <span class="hljs-selector-class">.tick</span> {
    <span class="hljs-attribute">font-size</span>: .<span class="hljs-number">725em</span>;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">200</span>;
  }

  <span class="hljs-selector-class">.gridline</span> {
    <span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#aaa</span>;
  }

  <span class="hljs-selector-class">.tick-mark</span> {
    <span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#aaa</span>;
  }
  <span class="hljs-selector-class">.baseline</span> {
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#aaa</span>;
  }

  <span class="hljs-selector-class">.tick</span> <span class="hljs-selector-class">.text</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
    <span class="hljs-attribute">position</span>: relative;
    <span class="hljs-attribute">white-space</span>: nowrap;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">50%</span>);
  }
  <span class="hljs-comment">/* This looks a little better at 40 percent than 50 */</span>
  <span class="hljs-selector-class">.axis</span><span class="hljs-selector-class">.snapTicks</span> <span class="hljs-selector-class">.tick</span><span class="hljs-selector-pseudo">:last-child</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">40%</span>);
  }
  <span class="hljs-selector-class">.axis</span><span class="hljs-selector-class">.snapTicks</span> <span class="hljs-selector-class">.tick</span><span class="hljs-selector-class">.tick-0</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">40%</span>);
  }
</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><!-- HTML_TAG_END --></pre>
				</div><div class="contents" style="display: none;"><pre class="svelte-1mot5qb"><!-- HTML_TAG_START --><span class="hljs-comment">&lt;!--
  @component
  Generates an HTML y-axis.
 --&gt;</span><span class="language-xml">
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><span class="language-javascript">
  <span class="hljs-keyword">import</span> { getContext } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;svelte&#x27;</span>;

  <span class="hljs-keyword">const</span> { padding, xRange, yScale } = <span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;LayerCake&#x27;</span>);

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Boolean</span>} [gridlines=true] - Extend lines from the ticks into the chart space */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> gridlines = <span class="hljs-literal">true</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Boolean</span>} [tickMarks=false] - Show a vertical mark for each tick. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> tickMarks = <span class="hljs-literal">false</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Boolean</span>} [baseline=false] – Show a solid line at the bottom. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> baseline = <span class="hljs-literal">false</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Function</span>} [formatTick=d =&gt; d] - A function that passes the current tick value and expects a nicely formatted value in return. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> <span class="hljs-title function_">formatTick</span> = d =&gt; d;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Number|Array|Function</span>} [ticks=4] - If this is a number, it passes that along to the [d3Scale.ticks](https://github.com/d3/d3-scale) function. If this is an array, hardcodes the ticks to those values. If it&#x27;s a function, passes along the default tick values and expects an array of tick values in return. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> ticks = <span class="hljs-number">4</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Number</span>} [xTick=-4] - How far over to position the text marker. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> xTick = -<span class="hljs-number">4</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Number</span>} [yTick=-1] - How far up and down to position the text marker. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> yTick = -<span class="hljs-number">1</span>;
</span><span class="hljs-keyword">
  $: </span><span class="language-javascript">isBandwidth = <span class="hljs-keyword">typeof</span> $yScale.<span class="hljs-property">bandwidth</span> === <span class="hljs-string">&#x27;function&#x27;</span>;
</span><span class="hljs-keyword">
  $: </span><span class="language-javascript">tickVals = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(ticks) ? ticks :
    isBandwidth ?
      $yScale.<span class="hljs-title function_">domain</span>() :
      <span class="hljs-keyword">typeof</span> ticks === <span class="hljs-string">&#x27;function&#x27;</span> ?
        <span class="hljs-title function_">ticks</span>($yScale.<span class="hljs-title function_">ticks</span>()) :
          $yScale.<span class="hljs-title function_">ticks</span>(ticks);
</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&#x27;axis y-axis&#x27;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;transform:translate(-</span></span></span><span class="language-javascript">{$padding.<span class="hljs-property">left</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px, 0)&#x27;</span>&gt;</span>
  </span><span class="language-javascript">{</span><span class="hljs-keyword">#each</span><span class="language-javascript"> tickVals <span class="hljs-keyword">as</span> tick, i (tick)}</span><span class="language-xml">
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&#x27;tick tick-</span></span></span><span class="language-javascript">{i}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&#x27;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;top:</span></span></span><span class="language-javascript">{$yScale(tick) + (isBandwidth ? $yScale.<span class="hljs-property">bandwidth</span> () / <span class="hljs-number">2</span> : <span class="hljs-number">0</span>)}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">%;left:</span></span></span><span class="language-javascript">{$xRange[<span class="hljs-number">0</span>]}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">%;&#x27;</span>&gt;</span>
      </span><span class="language-javascript">{</span><span class="hljs-keyword">#if</span><span class="language-javascript"> gridlines !== <span class="hljs-literal">false</span>}</span><span class="language-xml">
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gridline&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;top:0;left:</span></span></span><span class="language-javascript">{isBandwidth ? $padding.<span class="hljs-property">left</span> : <span class="hljs-number">0</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px;right:-</span></span></span><span class="language-javascript">{$padding.<span class="hljs-property">left</span> + $padding.<span class="hljs-property">right</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px;&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      </span><span class="language-javascript">{</span><span class="hljs-keyword">/if</span><span class="language-javascript">}</span><span class="language-xml">
      </span><span class="language-javascript">{</span><span class="hljs-keyword">#if</span><span class="language-javascript"> baseline !== <span class="hljs-literal">false</span> &amp;&amp; i === <span class="hljs-number">0</span>}</span><span class="language-xml">
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gridline baseline&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;top:0;left:</span></span></span><span class="language-javascript">{isBandwidth ? $padding.<span class="hljs-property">left</span> : <span class="hljs-number">0</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">;right:-</span></span></span><span class="language-javascript">{$padding.<span class="hljs-property">left</span> + $padding.<span class="hljs-property">right</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px;&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      </span><span class="language-javascript">{</span><span class="hljs-keyword">/if</span><span class="language-javascript">}</span><span class="language-xml">
      </span><span class="language-javascript">{</span><span class="hljs-keyword">#if</span><span class="language-javascript"> tickMarks === <span class="hljs-literal">true</span>}</span><span class="language-xml">
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tick-mark&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;top:0;left:</span></span></span><span class="language-javascript">{isBandwidth ? $padding.<span class="hljs-property">left</span> - <span class="hljs-number">6</span> : <span class="hljs-number">0</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px;width:6px;&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      </span><span class="language-javascript">{</span><span class="hljs-keyword">/if</span><span class="language-javascript">}</span><span class="language-xml">
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text&quot;</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;
          top:</span></span></span><span class="language-javascript">{yTick}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px;
          left:</span></span></span><span class="language-javascript">{isBandwidth ? ($padding.<span class="hljs-property">left</span> + xTick - <span class="hljs-number">4</span>) : <span class="hljs-number">0</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">px;
          transform: translate(</span></span></span><span class="language-javascript">{isBandwidth ? <span class="hljs-string">&#x27;-100%&#x27;</span> : <span class="hljs-number">0</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">, </span></span></span><span class="language-javascript">{isBandwidth ? -<span class="hljs-number">50</span> - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>($yScale.<span class="hljs-title function_">bandwidth</span>() / -<span class="hljs-number">2</span>) : <span class="hljs-string">&#x27;-100&#x27;</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">%);
        &#x27;</span>
      &gt;</span></span><span class="language-javascript">{<span class="hljs-title function_">formatTick</span>(tick)}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  </span><span class="language-javascript">{</span><span class="hljs-keyword">/each</span><span class="language-javascript">}</span><span class="language-xml">
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span></span><span class="language-css">
  <span class="hljs-selector-class">.axis</span>,
  <span class="hljs-selector-class">.tick</span>,
  <span class="hljs-selector-class">.tick-mark</span>,
  <span class="hljs-selector-class">.gridline</span>,
  <span class="hljs-selector-class">.baseline</span>,
  <span class="hljs-selector-class">.text</span> {
    <span class="hljs-attribute">position</span>: absolute;
  }
  <span class="hljs-selector-class">.axis</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  }
  <span class="hljs-selector-class">.tick</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">100</span>;
  }

  <span class="hljs-selector-class">.gridline</span> {
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#aaa</span>;
  }
  <span class="hljs-selector-class">.tick-mark</span> {
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#aaa</span>;
  }

  <span class="hljs-selector-class">.baseline</span><span class="hljs-selector-class">.gridline</span> {
    <span class="hljs-attribute">border-top-style</span>: solid;
  }

  <span class="hljs-selector-class">.tick</span> <span class="hljs-selector-class">.text</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
  }
</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><!-- HTML_TAG_END --></pre>
				</div><div class="contents" style="display: none;"><pre class="svelte-1mot5qb"><!-- HTML_TAG_START --><span class="hljs-comment">&lt;!--
  @component
  Creates an interaction layer (in HTML) using [d3-quadtree](https://github.com/d3/d3-quadtree) to find the nearest datapoint to the mouse. This component creates a slot that exposes variables `x`, `y`, `found` (the found datapoint), `visible` (a Boolean whether any data was found) and `e` (the event object).

  The quadtree searches across both the x and y dimensions at the same time. But if you want to only search across one, set the `x` and `y` props to the same value. For example, the [shared tooltip component](https://layercake.graphics/components/SharedTooltip.html.svelte) sets `y=&#x27;x&#x27;` since it&#x27;s nicer behavior to only pick up on the nearest x-value.
 --&gt;</span><span class="language-xml">
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><span class="language-javascript">
  <span class="hljs-keyword">import</span> { getContext } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;svelte&#x27;</span>;
  <span class="hljs-keyword">import</span> { quadtree } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;d3-quadtree&#x27;</span>;

  <span class="hljs-keyword">const</span> { data, xGet, yGet, width, height } = <span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;LayerCake&#x27;</span>);

  <span class="hljs-keyword">let</span> visible = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">let</span> found = {};
  <span class="hljs-keyword">let</span> e = {};

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">String</span>} [x=&#x27;x&#x27;] – The dimension to search across when moving the mouse left and right. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> x = <span class="hljs-string">&#x27;x&#x27;</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">String</span>} [y=&#x27;y&#x27;] – The dimension to search across when moving the mouse up and down. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> y = <span class="hljs-string">&#x27;y&#x27;</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">String</span>} [searchRadius] – The number of pixels to search around the mouse&#x27;s location. This is the third argument passed to [`quadtree.find`](https://github.com/d3/d3-quadtree#quadtree_find) and by default a value of `undefined` means an unlimited range. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> searchRadius = <span class="hljs-literal">undefined</span>;

  <span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">Array</span>} [dataset] – The dataset to work off of—defaults to $data if left unset. You can pass override the default here in here in case you don&#x27;t want to use the main data or it&#x27;s in a strange format. */</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> dataset = <span class="hljs-literal">undefined</span>;
</span><span class="hljs-keyword">
  $: </span><span class="language-javascript">xGetter = x === <span class="hljs-string">&#x27;x&#x27;</span> ? $xGet : $yGet;
</span><span class="hljs-keyword">  $: </span><span class="language-javascript">yGetter = y === <span class="hljs-string">&#x27;y&#x27;</span> ? $yGet : $xGet;

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">findItem</span> (evt) {
    e = evt;

    <span class="hljs-keyword">const</span> xLayerKey = <span class="hljs-string">`layer<span class="hljs-subst">${x.toUpperCase()}</span>`</span>;
    <span class="hljs-keyword">const</span> yLayerKey = <span class="hljs-string">`layer<span class="hljs-subst">${y.toUpperCase()}</span>`</span>;

    found = finder.<span class="hljs-title function_">find</span>(evt[xLayerKey], evt[yLayerKey], searchRadius) || {};
    visible = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(found).<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>;
  }
</span><span class="hljs-keyword">
  $: </span><span class="language-javascript">finder = <span class="hljs-title function_">quadtree</span>()
    .<span class="hljs-title function_">extent</span>([[-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>], [$width + <span class="hljs-number">1</span>, $height + <span class="hljs-number">1</span>]])
    .<span class="hljs-title function_">x</span>(xGetter)
    .<span class="hljs-title function_">y</span>(yGetter)
    .<span class="hljs-title function_">addAll</span>(dataset || $data);
</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span></span><span class="language-css">
  <span class="hljs-selector-class">.bg</span> {
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  }
</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">div</span>
  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg&quot;</span>
  <span class="hljs-attr">on:mousemove</span>=<span class="hljs-string">&quot;</span></span></span><span class="language-javascript">{findItem}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>
  <span class="hljs-attr">on:mouseout</span>=<span class="hljs-string">&quot;</span></span></span><span class="language-javascript">{<span class="hljs-function">() =&gt;</span> visible = <span class="hljs-literal">false</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>
  <span class="hljs-attr">on:blur</span>=<span class="hljs-string">&quot;</span></span></span><span class="language-javascript">{<span class="hljs-function">() =&gt;</span> visible = <span class="hljs-literal">false</span>}</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">slot</span>
  <span class="hljs-attr">x</span>=</span></span><span class="language-javascript">{<span class="hljs-title function_">xGetter</span>(found) || <span class="hljs-number">0</span>}</span><span class="language-xml"><span class="hljs-tag">
  <span class="hljs-attr">y</span>=</span></span><span class="language-javascript">{<span class="hljs-title function_">yGetter</span>(found) || <span class="hljs-number">0</span>}</span><span class="language-xml"><span class="hljs-tag">
  </span></span><span class="language-javascript">{found}</span><span class="language-xml"><span class="hljs-tag">
  </span></span><span class="language-javascript">{visible}</span><span class="language-xml"><span class="hljs-tag">
  </span></span><span class="language-javascript">{e}</span><span class="language-xml"><span class="hljs-tag">
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><!-- HTML_TAG_END --></pre>
				</div><div class="contents" style="display: none;"><pre class="svelte-1mot5qb"><!-- HTML_TAG_START -->myX,myY
1979,7.19
1980,7.83
1981,7.24
1982,7.44
1983,7.51
1984,7.1
1985,6.91
1986,7.53
1987,7.47
1988,7.48
1989,7.03
1990,6.23
1991,6.54
1992,7.54
1993,6.5
1994,7.18
1995,6.12
1996,7.87
1997,6.73
1998,6.55
1999,6.23
2000,6.31
2001,6.74
2002,5.95
2003,6.13
2004,6.04
2005,5.56
2006,5.91
2007,4.29
2008,4.72
2009,5.38
2010,4.92
2011,4.61
2012,3.62
2013,5.35
2014,5.28
2015,4.63
2016,4.72<!-- HTML_TAG_END --></pre>
				</div></div></div></div></main>


		<script type="module" data-sveltekit-hydrate="1ke6b0f">
			import { start } from "../_app/immutable/start-5b5f5607.js";

			start({
				assets: "",
				env: {},
				target: document.querySelector('[data-sveltekit-hydrate="1ke6b0f"]').parentNode,
				version: "1680234634854",
				hydrate: {
					node_ids: [0, 6],
					data: [null,null],
					form: null,
					error: null
				}
			});
		</script>
	<script type="application/json" data-sveltekit-fetched data-url="/api/guide-sections.json">{"status":200,"statusText":"","headers":{},"body":"[{\"html\":null,\"metadata\":{\"title\":\"Introduction\"},\"subsections\":[{\"slug\":\"what-is-layer-cake\",\"title\":\"What is Layer Cake?\"},{\"slug\":\"key-concepts\",\"title\":\"Key Concepts\"},{\"slug\":\"getting-started\",\"title\":\"Getting started\"},{\"slug\":\"using-layout-components\",\"title\":\"Using layout components\"},{\"slug\":\"layer-components\",\"title\":\"Layer components\"},{\"slug\":\"data-less-cakes\",\"title\":\"Data-less cakes\"},{\"slug\":\"server-side-rendering\",\"title\":\"Server-side rendering\"},{\"slug\":\"how-does-layercake-know-what-to-set-as-a-scale39s-domain-and-range\",\"title\":\"How does LayerCake know what to set as a scale's domain and range?\"}],\"slug\":\"introduction\",\"file\":\"00-introduction.md\"},{\"html\":null,\"metadata\":{\"title\":\"Troubleshooting\"},\"subsections\":[{\"slug\":\"use-the-debug-feature\",\"title\":\"Use the debug feature\"},{\"slug\":\"typescript\",\"title\":\"TypeScript\"},{\"slug\":\"the-chart-is-blank\",\"title\":\"The chart is blank\"},{\"slug\":\"the-chart-is-a-very-small-square\",\"title\":\"The chart is a very small square\"},{\"slug\":\"the-library-isn39t-building-properly\",\"title\":\"The library isn't building properly\"},{\"slug\":\"listening-for-click-events-on-the-entire-component\",\"title\":\"Listening for click events on the entire component\"}],\"slug\":\"troubleshooting\",\"file\":\"01-troubleshooting.md\"},{\"html\":null,\"metadata\":{\"title\":\"LayerCake props\"},\"subsections\":[{\"slug\":\"data\",\"title\":\"data\"},{\"slug\":\"x\",\"title\":\"x\"},{\"slug\":\"y\",\"title\":\"y\"},{\"slug\":\"z\",\"title\":\"z\"},{\"slug\":\"r\",\"title\":\"r\"},{\"slug\":\"debug\",\"title\":\"debug\"},{\"slug\":\"padding\",\"title\":\"padding\"},{\"slug\":\"xscale\",\"title\":\"xScale\"},{\"slug\":\"yscale\",\"title\":\"yScale\"},{\"slug\":\"zscale\",\"title\":\"zScale\"},{\"slug\":\"rscale\",\"title\":\"rScale\"},{\"slug\":\"xdomain\",\"title\":\"xDomain\"},{\"slug\":\"ydomain\",\"title\":\"yDomain\"},{\"slug\":\"zdomain\",\"title\":\"zDomain\"},{\"slug\":\"rdomain\",\"title\":\"rDomain\"},{\"slug\":\"xreverse\",\"title\":\"xReverse\"},{\"slug\":\"yreverse\",\"title\":\"yReverse\"},{\"slug\":\"zreverse\",\"title\":\"zReverse\"},{\"slug\":\"rreverse\",\"title\":\"rReverse\"},{\"slug\":\"xrange\",\"title\":\"xRange\"},{\"slug\":\"yrange\",\"title\":\"yRange\"},{\"slug\":\"zrange\",\"title\":\"zRange\"},{\"slug\":\"rrange\",\"title\":\"rRange\"},{\"slug\":\"xpadding\",\"title\":\"xPadding\"},{\"slug\":\"ypadding\",\"title\":\"yPadding\"},{\"slug\":\"zpadding\",\"title\":\"zPadding\"},{\"slug\":\"rpadding\",\"title\":\"rPadding\"},{\"slug\":\"xnice\",\"title\":\"xNice\"},{\"slug\":\"ynice\",\"title\":\"yNice\"},{\"slug\":\"znice\",\"title\":\"zNice\"},{\"slug\":\"rnice\",\"title\":\"rNice\"},{\"slug\":\"extents\",\"title\":\"extents\"},{\"slug\":\"flatdata\",\"title\":\"flatData\"},{\"slug\":\"ssr\",\"title\":\"ssr\"},{\"slug\":\"percentrange\",\"title\":\"percentRange\"},{\"slug\":\"position\",\"title\":\"position\"},{\"slug\":\"custom\",\"title\":\"custom\"}],\"slug\":\"layercake-props\",\"file\":\"02-layercake-props.md\"},{\"html\":null,\"metadata\":{\"title\":\"Computed context values\"},\"subsections\":[{\"slug\":\"activegetters\",\"title\":\"activeGetters\"},{\"slug\":\"aspectratio\",\"title\":\"aspectRatio\"},{\"slug\":\"box\",\"title\":\"box\"},{\"slug\":\"config\",\"title\":\"config\"},{\"slug\":\"containerwidth\",\"title\":\"containerWidth\"},{\"slug\":\"containerheight\",\"title\":\"containerHeight\"},{\"slug\":\"extents-1\",\"title\":\"extents\"},{\"slug\":\"width\",\"title\":\"width\"},{\"slug\":\"height\",\"title\":\"height\"},{\"slug\":\"x-1\",\"title\":\"x\"},{\"slug\":\"y-1\",\"title\":\"y\"},{\"slug\":\"z-1\",\"title\":\"z\"},{\"slug\":\"r-1\",\"title\":\"r\"},{\"slug\":\"xdomain-1\",\"title\":\"xDomain\"},{\"slug\":\"ydomain-1\",\"title\":\"yDomain\"},{\"slug\":\"zdomain-1\",\"title\":\"zDomain\"},{\"slug\":\"rdomain-1\",\"title\":\"rDomain\"},{\"slug\":\"xrange-1\",\"title\":\"xRange\"},{\"slug\":\"yrange-1\",\"title\":\"yRange\"},{\"slug\":\"zrange-1\",\"title\":\"zRange\"},{\"slug\":\"rrange-1\",\"title\":\"rRange\"},{\"slug\":\"xget\",\"title\":\"xGet(...)\"},{\"slug\":\"yget\",\"title\":\"yGet(...)\"},{\"slug\":\"zget\",\"title\":\"zGet(...)\"},{\"slug\":\"rget\",\"title\":\"rGet(...)\"},{\"slug\":\"xscale-1\",\"title\":\"xScale(...)\"},{\"slug\":\"yscale-1\",\"title\":\"yScale(...)\"},{\"slug\":\"zscale-1\",\"title\":\"zScale(...)\"},{\"slug\":\"rscale-1\",\"title\":\"rScale(...)\"}],\"slug\":\"computed-context-values\",\"file\":\"03-computed-context-values.md\"},{\"html\":null,\"metadata\":{\"title\":\"Layout components\"},\"subsections\":[{\"slug\":\"html\",\"title\":\"Html\"},{\"slug\":\"svg\",\"title\":\"Svg\"},{\"slug\":\"scaledsvg\",\"title\":\"ScaledSvg\"},{\"slug\":\"canvas\",\"title\":\"Canvas\"},{\"slug\":\"webgl\",\"title\":\"WebGL\"}],\"slug\":\"layout-components\",\"file\":\"04-layout-components.md\"},{\"html\":null,\"metadata\":{\"title\":\"Layout component props\"},\"subsections\":[{\"slug\":\"zindex\",\"title\":\"zIndex\"},{\"slug\":\"pointerevents\",\"title\":\"pointerEvents\"},{\"slug\":\"viewbox\",\"title\":\"viewBox\"},{\"slug\":\"fixedaspectratio\",\"title\":\"fixedAspectRatio\"},{\"slug\":\"contextattributes\",\"title\":\"contextAttributes\"}],\"slug\":\"layout-component-props\",\"file\":\"05-layout-component-props.md\"},{\"html\":null,\"metadata\":{\"title\":\"Helper functions\"},\"subsections\":[{\"slug\":\"bin\",\"title\":\"bin(...)\"},{\"slug\":\"calcextents\",\"title\":\"calcExtents(...)\"},{\"slug\":\"calcuniques\",\"title\":\"calcUniques(...)\"},{\"slug\":\"flatten\",\"title\":\"flatten(...)\"},{\"slug\":\"grouplonger\",\"title\":\"groupLonger(...)\"},{\"slug\":\"raise\",\"title\":\"raise(...)\"},{\"slug\":\"scalecanvas\",\"title\":\"scaleCanvas(...)\"},{\"slug\":\"stack\",\"title\":\"stack(...)\"},{\"slug\":\"uniques\",\"title\":\"uniques(...)\"}],\"slug\":\"helper-functions\",\"file\":\"99-helper-functions.md\"}]"}</script>
	<script type="application/json" data-sveltekit-fetched data-url="/example-ssr/ScatterWebgl.json">{"status":200,"statusText":"","headers":{},"body":"{\"main\":{\"title\":\"+page.svelte\",\"contents\":\"\u003Cscript>\\n  import { LayerCake, WebGL, Html } from 'layercake';\\n\\n  import ScatterWebGL from './_components/Scatter.webgl.svelte';\\n  import AxisX from './_components/AxisX.html.svelte';\\n  import AxisY from './_components/AxisY.html.svelte';\\n  import QuadTree from './_components/QuadTree.html.svelte';\\n\\n  // This example loads csv data as json using @rollup/plugin-dsv\\n  import data from './_data/points.csv';\\n\\n  const xKey = 'myX';\\n  const yKey = 'myY';\\n\\n  const r = 3;\\n  const padding = 6;\\n\\n  data.forEach(d => {\\n    d[yKey] = +d[yKey];\\n  });\\n\u003C/script>\\n\\n\u003Cstyle>\\n  /*\\n    The wrapper div needs to have an explicit width and height in CSS.\\n    It can also be a flexbox child or CSS grid element.\\n    The point being it needs dimensions since the \u003CLayerCake> element will\\n    expand to fill it.\\n  */\\n  .chart-container {\\n    position: relative;\\n    width: 100%;\\n    height: 400px;\\n  }\\n\\n  .circle {\\n    position: absolute;\\n    border-radius: 50%;\\n    background-color: rgba(171,0, 214);\\n    transform: translate(-50%, -50%);\\n    pointer-events: none;\\n    width: 10px;\\n    height: 10px;\\n  }\\n\u003C/style>\\n\\n\u003Cdiv class=\\\"chart-container\\\">\\n  \u003CLayerCake\\n    position={'absolute'}\\n    ssr={true}\\n    percentRange={true}\\n    padding={{ top: 5, right: 5, bottom: 20, left: 25 }}\\n    x={xKey}\\n    y={yKey}\\n    xPadding={[padding, padding]}\\n    yPadding={[padding, padding]}\\n    data={data}\\n  >\\n    \u003CHtml>\\n      \u003CAxisX/>\\n      \u003CAxisY/>\\n    \u003C/Html>\\n  \u003C/LayerCake>\\n\\n  \u003CLayerCake\\n    position={'absolute'}\\n    padding={{ top: 0, right: 5, bottom: 20, left: 25 }}\\n    x={xKey}\\n    y={yKey}\\n    xPadding={[padding, padding]}\\n    yPadding={[padding, padding]}\\n    data={data}\\n  >\\n    \u003CWebGL>\\n      \u003CScatterWebGL\\n        {r}\\n      />\\n    \u003C/WebGL>\\n\\n    \u003CHtml>\\n      \u003CQuadTree\\n        let:x\\n        let:y\\n        let:visible\\n      >\\n        \u003Cdiv\\n          class=\\\"circle\\\"\\n          style=\\\"top:{y}px;left:{x}px;display: { visible ? 'block' : 'none' };\\\"\\n        >\u003C/div>\\n      \u003C/QuadTree>\\n    \u003C/Html>\\n  \u003C/LayerCake>\\n\u003C/div>\"},\"dek\":\"\",\"components\":[{\"title\":\"./_components/Scatter.webgl.svelte\",\"contents\":\"\u003C!--\\n  @component\\n  Generates a a WebGl scatter plot.\\n -->\\n\u003Cscript>\\n  import reglWrapper from 'regl';\\n  import { getContext } from 'svelte';\\n\\n  const { data, xGet, yGet, width, height } = getContext('LayerCake');\\n\\n  /** @type {Number} [r=5] - The circle's radius. */\\n  export let r = 5;\\n\\n  /** @type {String} [fill='#0cf'] - The circle's fill color. */\\n  export let fill = '#0cf';\\n\\n  export let stroke = '#000'; // Not yet implemented\\n  // export let strokeWidth = 0;\\n\\n  function hexToRgbPercent (hex) {\\n    let str = hex.replace('#', '');\\n    if (str.length === 3) {\\n      str = str[0] + str[0] + str[1] + str[1] + str[2] + str[2];\\n    }\\n    return str.match(/.{1,2}/g).map(d => parseInt(d, 16) / 255);\\n  }\\n\\n  const { gl } = getContext('gl');\\n\\n  function resize () {\\n    if ($gl) {\\n      const canvas = $gl.canvas;\\n      // Lookup the size the browser is displaying the canvas.\\n      const displayWidth = canvas.clientWidth;\\n      const displayHeight = canvas.clientHeight;\\n\\n      // Check if the canvas is not the same size.\\n      if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\\n        // Make the canvas the same size\\n        canvas.width = displayWidth;\\n        canvas.height = displayHeight;\\n      }\\n      $gl.viewport(0, 0, canvas.width, canvas.height);\\n    }\\n  }\\n\\n  let regl;\\n\\n  function render () {\\n    if ($gl) {\\n      regl = reglWrapper({\\n        gl: $gl,\\n        extensions: ['oes_standard_derivatives']\\n      });\\n\\n      regl.clear({\\n        color: [0, 0, 0, 0],\\n        depth: 1\\n      });\\n\\n      const draw = regl({\\n        // circle code comes from:\\n        // https://www.desultoryquest.com/blog/drawing-anti-aliased-circular-points-using-opengl-slash-webgl/\\n        frag: `\\n        #extension GL_OES_standard_derivatives : enable\\n        precision mediump float;\\n        uniform vec3 fill_color;\\n        uniform vec3 stroke_color;\\n        varying float s_s;\\n        void main () {\\n\\n          vec2 cxy = 2.0 * gl_PointCoord - 1.0;\\n\\n          float dist = dot(cxy, cxy);\\n\\n          float delta = fwidth(dist);\\n\\n          float alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, dist);\\n\\n          float outer_edge_center = 1.0 - s_s;\\n          float stroke = 1.0 - smoothstep(outer_edge_center - delta, outer_edge_center + delta, dist);\\n\\n          // gl_FragColor = vec4(fill_color,1.0) * alpha;\\n          gl_FragColor = vec4( mix(stroke_color, fill_color, stroke), 1.0 ) * alpha;\\n          gl_FragColor.rgb *= gl_FragColor.a;\\n        }`,\\n        vert: `\\n        precision mediump float;\\n        attribute vec2 position;\\n        attribute float r;\\n        attribute float stroke_size;\\n\\n        varying float s_s;\\n\\n        uniform float stage_width;\\n        uniform float stage_height;\\n\\n        // http://peterbeshai.com/beautifully-animate-points-with-webgl-and-regl.html\\n        vec2 normalizeCoords(vec2 position) {\\n          // read in the positions into x and y vars\\n          float x = position[0];\\n          float y = position[1];\\n          return vec2(\\n            2.0 * ((x / stage_width) - 0.5),\\n            // invert y to treat [0,0] as bottom left in pixel space\\n            -(2.0 * ((y / stage_height) - 0.5))\\n          );\\n        }\\n\\n        void main () {\\n          s_s = stroke_size;\\n          gl_PointSize = r;\\n          gl_Position = vec4(normalizeCoords(position), 0.0, 1.0);\\n        }`,\\n        attributes: {\\n          // There will be a position value for each point\\n          // we pass in\\n          position: (context, props) => {\\n            return props.points.map(point => {\\n              return [$xGet(point), $yGet(point)];\\n            });\\n          },\\n          r: (context, props) => {\\n            // const m = window.devicePixelRatio > 1 ? 4.0 : 2.0\\n            // If using an r-scale, set width here\\n            return props.points.map(point => props.pointWidth);\\n          },\\n          stroke_size: (context, props) => {\\n            // If using an r-scale, set width here\\n            return props.points.map(point => 0);\\n          }\\n        },\\n        uniforms: {\\n          fill_color: hexToRgbPercent(fill),\\n          // stroke_color: [0.6705882352941176, 0, 0.8392156862745098],\\n          stroke_color: hexToRgbPercent(stroke),\\n          // FYI: there is a helper method for grabbing\\n          // values out of the context as well.\\n          // These uniforms are used in our fragment shader to\\n          // convert our x / y values to WebGL coordinate space.\\n          stage_width: regl.context('drawingBufferWidth'),\\n          stage_height: regl.context('drawingBufferHeight')\\n        },\\n        count: (context, props) => {\\n          // set the count based on the number of points we have\\n          return props.points.length;\\n        },\\n        primitive: 'points',\\n        blend: {\\n          enable: true,\\n          func: {\\n            srcRGB: 'src alpha',\\n            srcAlpha: 'src alpha',\\n            dstRGB: 'one minus src alpha',\\n            dstAlpha: 'one minus src alpha'\\n          }\\n        },\\n        depth: { enable: false }\\n      });\\n\\n      draw({\\n        pointWidth: r * 2,\\n        points: $data\\n      });\\n    }\\n  }\\n\\n  $: ($width, $height, $gl, resize(), render());\\n\\n\u003C/script>\"},{\"title\":\"./_components/AxisX.html.svelte\",\"contents\":\"\u003C!--\\n  @component\\n  Generates an HTML x-axis, useful for server-side rendered charts.  This component is also configured to detect if your x-scale is an ordinal scale. If so, it will place the markers in the middle of the bandwidth.\\n -->\\n\u003Cscript>\\n  import { getContext } from 'svelte';\\n\\n  const { xScale } = getContext('LayerCake');\\n\\n  /** @type {Boolean} [gridlines=true] - Extend lines from the ticks into the chart space. */\\n  export let gridlines = true;\\n\\n  /** @type {Boolean} [tickMarks=false] - Show a vertical mark for each tick. */\\n  export let tickMarks = false;\\n\\n  /** @type {Boolean} [baseline=false] – Show a solid line at the bottom. */\\n  export let baseline = false;\\n\\n  /** @type {Boolean} [snapTicks=false] - Instead of centering the text on the first and the last items, align them to the edges of the chart. */\\n  export let snapTicks = false;\\n\\n  /** @type {Function} [formatTick=d => d] - A function that passes the current tick value and expects a nicely formatted value in return. */\\n  export let formatTick = d => d;\\n\\n  /** @type {Number|Array|Function} [ticks] - If this is a number, it passes that along to the [d3Scale.ticks](https://github.com/d3/d3-scale) function. If this is an array, hardcodes the ticks to those values. If it's a function, passes along the default tick values and expects an array of tick values in return. If nothing, it uses the default ticks supplied by the D3 function. */\\n  export let ticks = undefined;\\n\\n  /** @type {Number} [yTick=7] - The distance from the baseline to place each tick value, in pixels. */\\n  export let yTick = 7;\\n\\n  $: isBandwidth = typeof $xScale.bandwidth === 'function';\\n\\n  $: tickVals = Array.isArray(ticks) ? ticks :\\n    isBandwidth ?\\n      $xScale.domain() :\\n      typeof ticks === 'function' ?\\n        ticks($xScale.ticks()) :\\n          $xScale.ticks(ticks);\\n\u003C/script>\\n\\n\u003Cdiv class='axis x-axis' class:snapTicks>\\n  {#each tickVals as tick, i (tick)}\\n    {#if gridlines !== false}\\n      \u003Cdiv class=\\\"gridline\\\" style='left:{$xScale(tick)}%;top: 0px;bottom: 0;'>\u003C/div>\\n    {/if}\\n    {#if tickMarks === true}\\n      \u003Cdiv class=\\\"tick-mark\\\" style='left:{$xScale(tick) + (isBandwidth ? $xScale.bandwidth() / 2 : 0)}%;height:6px;bottom: -6px;'>\u003C/div>\\n    {/if}\\n    \u003Cdiv\\n      class='tick tick-{ i }'\\n      style='left:{$xScale(tick) + (isBandwidth ? $xScale.bandwidth() / 2 : 0)}%;top:100%;'>\\n      \u003Cdiv\\n        class=\\\"text\\\"\\n        style='top:{(yTick)}px;'>{formatTick(tick)}\u003C/div>\\n    \u003C/div>\\n  {/each}\\n  {#if baseline === true}\\n    \u003Cdiv class=\\\"baseline\\\" style='top: 100%;width: 100%;'>\u003C/div>\\n  {/if}\\n\u003C/div>\\n\\n\u003Cstyle>\\n  .axis,\\n  .tick,\\n  .tick-mark,\\n  .gridline,\\n  .baseline {\\n    position: absolute;\\n  }\\n  .axis {\\n    width: 100%;\\n    height: 100%;\\n  }\\n  .tick {\\n    font-size: .725em;\\n    font-weight: 200;\\n  }\\n\\n  .gridline {\\n    border-left: 1px dashed #aaa;\\n  }\\n\\n  .tick-mark {\\n    border-left: 1px solid #aaa;\\n  }\\n  .baseline {\\n    border-top: 1px solid #aaa;\\n  }\\n\\n  .tick .text {\\n    color: #666;\\n    position: relative;\\n    white-space: nowrap;\\n    transform: translateX(-50%);\\n  }\\n  /* This looks a little better at 40 percent than 50 */\\n  .axis.snapTicks .tick:last-child {\\n    transform: translateX(-40%);\\n  }\\n  .axis.snapTicks .tick.tick-0 {\\n    transform: translateX(40%);\\n  }\\n\u003C/style>\"},{\"title\":\"./_components/AxisY.html.svelte\",\"contents\":\"\u003C!--\\n  @component\\n  Generates an HTML y-axis.\\n -->\\n\u003Cscript>\\n  import { getContext } from 'svelte';\\n\\n  const { padding, xRange, yScale } = getContext('LayerCake');\\n\\n  /** @type {Boolean} [gridlines=true] - Extend lines from the ticks into the chart space */\\n  export let gridlines = true;\\n\\n  /** @type {Boolean} [tickMarks=false] - Show a vertical mark for each tick. */\\n  export let tickMarks = false;\\n\\n  /** @type {Boolean} [baseline=false] – Show a solid line at the bottom. */\\n  export let baseline = false;\\n\\n  /** @type {Function} [formatTick=d => d] - A function that passes the current tick value and expects a nicely formatted value in return. */\\n  export let formatTick = d => d;\\n\\n  /** @type {Number|Array|Function} [ticks=4] - If this is a number, it passes that along to the [d3Scale.ticks](https://github.com/d3/d3-scale) function. If this is an array, hardcodes the ticks to those values. If it's a function, passes along the default tick values and expects an array of tick values in return. */\\n  export let ticks = 4;\\n\\n  /** @type {Number} [xTick=-4] - How far over to position the text marker. */\\n  export let xTick = -4;\\n\\n  /** @type {Number} [yTick=-1] - How far up and down to position the text marker. */\\n  export let yTick = -1;\\n\\n  $: isBandwidth = typeof $yScale.bandwidth === 'function';\\n\\n  $: tickVals = Array.isArray(ticks) ? ticks :\\n    isBandwidth ?\\n      $yScale.domain() :\\n      typeof ticks === 'function' ?\\n        ticks($yScale.ticks()) :\\n          $yScale.ticks(ticks);\\n\u003C/script>\\n\\n\u003Cdiv class='axis y-axis' style='transform:translate(-{$padding.left}px, 0)'>\\n  {#each tickVals as tick, i (tick)}\\n    \u003Cdiv class='tick tick-{i}' style='top:{$yScale(tick) + (isBandwidth ? $yScale.bandwidth () / 2 : 0)}%;left:{$xRange[0]}%;'>\\n      {#if gridlines !== false}\\n        \u003Cdiv class=\\\"gridline\\\" style='top:0;left:{isBandwidth ? $padding.left : 0}px;right:-{$padding.left + $padding.right}px;'>\u003C/div>\\n      {/if}\\n      {#if baseline !== false && i === 0}\\n        \u003Cdiv class=\\\"gridline baseline\\\" style='top:0;left:{isBandwidth ? $padding.left : 0};right:-{$padding.left + $padding.right}px;'>\u003C/div>\\n      {/if}\\n      {#if tickMarks === true}\\n        \u003Cdiv class=\\\"tick-mark\\\" style='top:0;left:{isBandwidth ? $padding.left - 6 : 0}px;width:6px;'>\u003C/div>\\n      {/if}\\n      \u003Cdiv\\n        class=\\\"text\\\"\\n        style='\\n          top:{yTick}px;\\n          left:{isBandwidth ? ($padding.left + xTick - 4) : 0}px;\\n          transform: translate({isBandwidth ? '-100%' : 0}, {isBandwidth ? -50 - Math.floor($yScale.bandwidth() / -2) : '-100'}%);\\n        '\\n      >{formatTick(tick)}\u003C/div>\\n    \u003C/div>\\n  {/each}\\n\u003C/div>\\n\\n\u003Cstyle>\\n  .axis,\\n  .tick,\\n  .tick-mark,\\n  .gridline,\\n  .baseline,\\n  .text {\\n    position: absolute;\\n  }\\n  .axis {\\n    width: 100%;\\n    height: 100%;\\n  }\\n  .tick {\\n    font-size: 12px;\\n    width: 100%;\\n    font-weight: 100;\\n  }\\n\\n  .gridline {\\n    border-top: 1px dashed #aaa;\\n  }\\n  .tick-mark {\\n    border-top: 1px solid #aaa;\\n  }\\n\\n  .baseline.gridline {\\n    border-top-style: solid;\\n  }\\n\\n  .tick .text {\\n    color: #666;\\n  }\\n\u003C/style>\"},{\"title\":\"./_components/QuadTree.html.svelte\",\"contents\":\"\u003C!--\\n  @component\\n  Creates an interaction layer (in HTML) using [d3-quadtree](https://github.com/d3/d3-quadtree) to find the nearest datapoint to the mouse. This component creates a slot that exposes variables `x`, `y`, `found` (the found datapoint), `visible` (a Boolean whether any data was found) and `e` (the event object).\\n\\n  The quadtree searches across both the x and y dimensions at the same time. But if you want to only search across one, set the `x` and `y` props to the same value. For example, the [shared tooltip component](https://layercake.graphics/components/SharedTooltip.html.svelte) sets `y='x'` since it's nicer behavior to only pick up on the nearest x-value.\\n -->\\n\u003Cscript>\\n  import { getContext } from 'svelte';\\n  import { quadtree } from 'd3-quadtree';\\n\\n  const { data, xGet, yGet, width, height } = getContext('LayerCake');\\n\\n  let visible = false;\\n  let found = {};\\n  let e = {};\\n\\n  /** @type {String} [x='x'] – The dimension to search across when moving the mouse left and right. */\\n  export let x = 'x';\\n\\n  /** @type {String} [y='y'] – The dimension to search across when moving the mouse up and down. */\\n  export let y = 'y';\\n\\n  /** @type {String} [searchRadius] – The number of pixels to search around the mouse's location. This is the third argument passed to [`quadtree.find`](https://github.com/d3/d3-quadtree#quadtree_find) and by default a value of `undefined` means an unlimited range. */\\n  export let searchRadius = undefined;\\n\\n  /** @type {Array} [dataset] – The dataset to work off of—defaults to $data if left unset. You can pass override the default here in here in case you don't want to use the main data or it's in a strange format. */\\n  export let dataset = undefined;\\n\\n  $: xGetter = x === 'x' ? $xGet : $yGet;\\n  $: yGetter = y === 'y' ? $yGet : $xGet;\\n\\n  function findItem (evt) {\\n    e = evt;\\n\\n    const xLayerKey = `layer${x.toUpperCase()}`;\\n    const yLayerKey = `layer${y.toUpperCase()}`;\\n\\n    found = finder.find(evt[xLayerKey], evt[yLayerKey], searchRadius) || {};\\n    visible = Object.keys(found).length > 0;\\n  }\\n\\n  $: finder = quadtree()\\n    .extent([[-1, -1], [$width + 1, $height + 1]])\\n    .x(xGetter)\\n    .y(yGetter)\\n    .addAll(dataset || $data);\\n\u003C/script>\\n\\n\u003Cstyle>\\n  .bg {\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n  }\\n\u003C/style>\\n\\n\u003Cdiv\\n  class=\\\"bg\\\"\\n  on:mousemove=\\\"{findItem}\\\"\\n  on:mouseout=\\\"{() => visible = false}\\\"\\n  on:blur=\\\"{() => visible = false}\\\"\\n>\u003C/div>\\n\u003Cslot\\n  x={xGetter(found) || 0}\\n  y={yGetter(found) || 0}\\n  {found}\\n  {visible}\\n  {e}\\n>\u003C/slot>\"}],\"modules\":[],\"componentModules\":[],\"componentComponents\":[],\"csvs\":[{\"title\":\"./_data/points.csv\",\"contents\":\"myX,myY\\n1979,7.19\\n1980,7.83\\n1981,7.24\\n1982,7.44\\n1983,7.51\\n1984,7.1\\n1985,6.91\\n1986,7.53\\n1987,7.47\\n1988,7.48\\n1989,7.03\\n1990,6.23\\n1991,6.54\\n1992,7.54\\n1993,6.5\\n1994,7.18\\n1995,6.12\\n1996,7.87\\n1997,6.73\\n1998,6.55\\n1999,6.23\\n2000,6.31\\n2001,6.74\\n2002,5.95\\n2003,6.13\\n2004,6.04\\n2005,5.56\\n2006,5.91\\n2007,4.29\\n2008,4.72\\n2009,5.38\\n2010,4.92\\n2011,4.61\\n2012,3.62\\n2013,5.35\\n2014,5.28\\n2015,4.63\\n2016,4.72\"}],\"jsons\":[]}"}</script></div>
	</body>
</html>
